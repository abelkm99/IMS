"use strict";(self["webpackChunkims"]=self["webpackChunkims"]||[]).push([[5987],{5987:(e,t,l)=>{l.r(t),l.d(t,{default:()=>K});var r=l(3673),s=l(8880),i=l(2323);const o={class:"q-pt-xl"},a={class:"q-pt-xl row"},n={class:"q-pa-md col-7"},u={class:"q-gutter-md row"},d={class:"row items-center justify-end"},p={class:"row items-center justify-end"},m={class:"row q-gutter-md q-pt-xl"},c={class:"row q-gutter-md q-pt-xl"},h={class:"q-pa-md col-5"},y={class:"q-pa-md row"},f={class:"row q-pa-md"},w={class:"q-pl-lg"},_=(0,r.Uk)("Total : "),v={class:"text-secondary"},S={class:"q-gutter-md"};function g(e,t,l,g,I,O){const b=(0,r.up)("OrdersHeader"),T=(0,r.up)("TrackItem"),q=(0,r.up)("q-btn"),P=(0,r.up)("q-date"),Q=(0,r.up)("q-popup-proxy"),W=(0,r.up)("q-icon"),k=(0,r.up)("q-time"),D=(0,r.up)("q-input"),Z=(0,r.up)("q-select"),C=(0,r.up)("Select"),V=(0,r.up)("SelectOptional"),$=(0,r.up)("q-form"),x=(0,r.up)("q-item-section"),j=(0,r.up)("q-item"),N=(0,r.up)("q-list"),U=(0,r.up)("q-btn-dropdown"),Y=(0,r.up)("q-td"),M=(0,r.up)("q-table"),E=(0,r.up)("q-scroll-area"),H=(0,r.up)("q-page"),R=(0,r.Q2)("close-popup");return(0,r.wg)(),(0,r.j4)(H,{padding:""},{default:(0,r.w5)((()=>[(0,r.Wm)(b),(0,r.Wm)(T,{parent_date:I.Order_Date},null,8,["parent_date"]),(0,r._)("div",o,[(0,r._)("div",a,[(0,r._)("div",n,[(0,r.Wm)($,{onKeydown:(0,s.D2)((0,s.iM)(O.addItem,["prevent"]),["enter"]),onSubmit:(0,s.iM)(O.onSubmit,["prevent"]),onReset:O.onReset,class:"q-gutter-sm"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,i.zw)(I.OrderType)+" ",1),(0,r._)("div",u,[(0,r.Wm)(D,{color:"secondary",filled:"",modelValue:I.Order_Date,"onUpdate:modelValue":t[2]||(t[2]=e=>I.Order_Date=e)},{prepend:(0,r.w5)((()=>[(0,r.Wm)(W,{name:"event",class:"cursor-pointer"},{default:(0,r.w5)((()=>[(0,r.Wm)(Q,{"transition-show":"scale","transition-hide":"scale"},{default:(0,r.w5)((()=>[(0,r.Wm)(P,{color:"secondary",modelValue:I.Order_Date,"onUpdate:modelValue":t[0]||(t[0]=e=>I.Order_Date=e),mask:"YYYY-MM-DD HH:mm"},{default:(0,r.w5)((()=>[(0,r._)("div",d,[(0,r.wy)((0,r.Wm)(q,{label:"Close",color:"secondary",flat:""},null,512),[[R]])])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),append:(0,r.w5)((()=>[(0,r.Wm)(W,{name:"access_time",class:"cursor-pointer"},{default:(0,r.w5)((()=>[(0,r.Wm)(Q,{"transition-show":"scale","transition-hide":"scale"},{default:(0,r.w5)((()=>[(0,r.Wm)(k,{color:"secondary",modelValue:I.Order_Date,"onUpdate:modelValue":t[1]||(t[1]=e=>I.Order_Date=e),mask:"YYYY-MM-DD HH:mm",format12h:""},{default:(0,r.w5)((()=>[(0,r._)("div",p,[(0,r.wy)((0,r.Wm)(q,{label:"Close",color:"primary",flat:""},null,512),[[R]])])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,r.Wm)(Z,{color:"secondary",filled:"",onInput:t[3]||(t[3]=()=>{e.toogle()}),modelValue:I.OrderType,"onUpdate:modelValue":t[4]||(t[4]=e=>I.OrderType=e),label:"Order Type",options:["Sales","Purchase"],style:{width:"200px"},behavior:"menu"},null,8,["modelValue"]),"Sales"===I.OrderType?((0,r.wg)(),(0,r.j4)(C,{key:0,filter_key:"CustomerName",ref:"customerSelect",lable:"Customer",rows:I.customer_option,stringOptions:I.customer_option.map((e=>e.CustomerName))},null,8,["rows","stringOptions"])):(0,r.kq)("",!0),"Purchase"===I.OrderType?((0,r.wg)(),(0,r.j4)(C,{key:1,style:{width:"200px"},filter_key:"SupplierName",ref:"supplierSelect",lable:"Supplier",rows:I.supplier_option,stringOptions:I.supplier_option.map((e=>e.SupplierName))},null,8,["rows","stringOptions"])):(0,r.kq)("",!0)]),(0,r._)("div",m,[(0,r.Wm)(V,{filter_key:"ItemType",ref:"itemSelect",lable:"Item Type",rows:I.items_option,stringOptions:I.items_option.map((e=>e.ItemType)),style:{width:"200px"}},null,8,["rows","stringOptions"]),(0,r.Wm)(D,{color:"secondary",filled:"",modelValue:I.Quantity,"onUpdate:modelValue":t[5]||(t[5]=e=>I.Quantity=e),type:"number",min:"1",label:"Quantity",hint:"have to be greater than 0"},null,8,["modelValue"]),(0,r.Wm)(D,{color:"secondary",filled:"",modelValue:I.Price,"onUpdate:modelValue":t[6]||(t[6]=e=>I.Price=e),type:"number",min:"1",label:"Price",hint:"have to be greater than 0"},null,8,["modelValue"]),(0,r.Wm)(q,{label:"Add Item",color:"purple",style:{height:"50px"},onClick:t[7]||(t[7]=e=>O.addItem())})]),(0,r._)("div",c,[(0,r.Wm)(q,{label:"Order",type:"submit",color:"positive"}),(0,r.Wm)(q,{label:"Reset",type:"reset",color:"negative",flat:"",class:"q-ml-sm"})])])),_:1},8,["onKeydown","onSubmit","onReset"])]),(0,r._)("div",h,[(0,r.Wm)(E,{style:{width:"600px",height:"800px"}},{default:(0,r.w5)((()=>[(0,r._)("div",y,[(0,r.Wm)(M,{title:"Purchase Items",rows:I.rows,columns:I.columns,"row-key":"name",selection:"multiple",selected:I.selected,"onUpdate:selected":t[8]||(t[8]=e=>I.selected=e)},{"top-left":(0,r.w5)((()=>[(0,r._)("div",f,[(0,r._)("span",null,(0,i.zw)(I.title),1),(0,r._)("span",w,[_,(0,r._)("b",v,(0,i.zw)(O.totalPurchase)+" Birr",1)])])])),"top-right":(0,r.w5)((()=>[(0,r._)("div",S,[(0,r.Wm)(U,{flat:"",color:"secondary"},{default:(0,r.w5)((()=>[(0,r.Wm)(N,null,{default:(0,r.w5)((()=>[(0,r.wy)((0,r.Wm)(j,{clickable:""},{default:(0,r.w5)((()=>[(0,r.Wm)(x,null,{default:(0,r.w5)((()=>[(0,r.Wm)(q,{label:"save slip",flat:"",icon:"turned_in",color:"secondary",onClick:O.saveSlip},null,8,["onClick"]),(0,r.Wm)(q,{label:"load slip",flat:"",icon:"download",color:"secondary",onClick:O.loadSlip},null,8,["onClick"])])),_:1})])),_:1},512),[[R]])])),_:1})])),_:1}),(0,r.Wm)(q,{color:"negative","icon-right":"delete_forever","no-caps":"",onClick:O.deleteSelected},null,8,["onClick"])])])),"body-cell-action":(0,r.w5)((e=>[(0,r.Wm)(Y,{props:e},{default:(0,r.w5)((()=>[(0,r.Wm)(q,{color:"negative","icon-right":"delete","no-caps":"",flat:"",dense:"",onClick:t=>O.deleteval(I.rows.indexOf(e.row))},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","selected"])])])),_:1})])])])])),_:1})}var I=l(589),O=l(3592),b=l(4664),T=l(3962),q=l(7428),P=l(807),Q=l(8944);const W={name:"MakePurchase",components:{OrdersHeader:O.Z,Select:P.Z,SelectOptional:Q.Z,TrackItem:b.Z},data(){return{items_option:[],transaction_option:[],supplier_option:[],customer_option:[],Quantity:"",Price:"",model:null,Order_Date:null,Transaction_Type:null,OrderString:"",OrderType:"Sales",order_dictionary:{Sales:2,Purchase:1},rows:[],columns:[{name:"ItemType",label:"ItemType",field:"ItemType",align:"left"},{name:"Quantity",label:"Quantity",field:"Quantity"},{name:"Price",label:"Price",field:"Price",sortable:!0},{name:"Total",label:"Total",field:"Total",sortable:!0},{name:"action",label:"Action",field:"action"}],title:"Purchase Items",selected:[]}},methods:{focustItemType(){this.$refs.itemSelect.$el.focus()},saveSlip(){this.rows.length>0?I.Z.set("slip1",this.rows):(0,q.j)("No Items are on the table")},loadSlip(){var e=I.Z.getItem("slip1")||[];this.rows=[],this.rows=e},myRule(e){if(null===e)return"Empty Feild!!"},addItem(){if(null==this.$refs.itemSelect.value||""==this.$refs.itemSelect.value)(0,q.j)("Item Type Feild can't be empty!"),this.focustItemType();else if(this.added_before())if(this.Quantity<1||null==this.Quantity)(0,q.j)("Please Enter a valid Number for Quantity");else if(this.Price<1||null==this.Price)(0,q.j)("Please Enter a valid Number for Price");else{var e={ItemType:this.$refs.itemSelect.value,Quantity:this.Quantity,Price:this.Price,Total:this.Quantity*this.Price};this.rows.push(e),this.$refs.itemSelect.value=null,this.Quantity=null,this.Price=null,this.focustItemType()}else this.focustItemType(),(0,q.j)(`item type ${this.$refs.itemSelect.value} is already added to the Order list`)},added_before(){return void 0==this.rows.find((e=>e.ItemType===this.$refs.itemSelect.value))},onSubmit(){if(null==this.Order_Date)(0,q.j)("Please Fill The Order Date");else if(this.OrderString=this.getOrderString(),null==this.OrderString)(0,q.j)("No Purchase Item is listed");else{const e={OrderType:this.order_dictionary[this.OrderType],SupplierID:"Purchase"===this.OrderType?this.supplier_option.find((e=>e.SupplierName===this.$refs.supplierSelect.value)).SupplierID:"",CutomerID:"Sales"===this.OrderType?this.customer_option.find((e=>e.CustomerName===this.$refs.customerSelect.value)).CustomerID:"",OrderDate:this.Order_Date,OrderInformation:this.OrderString};(0,T.fS)(e).then((e=>{(0,q.U)(e.data.message,"positive","top"),"Sales"==this.OrderType?this.$router.push({name:"sales-order"}):this.$router.push({name:"purchases-order"})})).catch((e=>{(0,q.j)(e.response.data.message,"negative","top")}))}},onReset(){this.$refs.itemSelect.value=null,this.Transaction_Type=null,this.Order_Date=null,this.$refs.customerSelect.value=null,this.$refs.supplierSelect.value=null,this.Quantity=null,this.Price=null,this.rows=[]},getItemID(e){return this.items_option.find((t=>t.ItemType===e)).ItemID},getOrderString(){var e="";return this.rows.forEach((t=>{e+=this.getItemID(t.ItemType)+","+t.Price+","+t.Quantity+";"})),e.length>0?e:null},deleteSelected(){let e=this;this.selected.filter((function(t){return e.rows.splice(e.rows.indexOf(t),1),t})),this.selected=[]},deleteval(e){this.rows.splice(e,1)}},computed:{totalPurchase(){var e=0;return this.rows.forEach((t=>{e+=parseInt(t.Total)})),e}},mounted(){this.items_option=I.Z.getItem("Items"),this.supplier_option=I.Z.getItem("Suppliers"),this.customer_option=I.Z.getItem("Customers"),this.employee_option=I.Z.getItem("Employees"),this.driver_option=I.Z.getItem("Drivers"),this.focustItemType()}};var k=l(4379),D=l(5269),Z=l(4842),C=l(4554),V=l(3944),$=l(2651),x=l(2165),j=l(5990),N=l(8516),U=l(7704),Y=l(3243),M=l(2226),E=l(1046),H=l(3414),R=l(2035),F=l(3884),z=l(677),A=l(7518),B=l.n(A);W.render=g;const K=W;B()(W,"components",{QPage:k.Z,QForm:D.Z,QInput:Z.Z,QIcon:C.Z,QPopupProxy:V.Z,QDate:$.Z,QBtn:x.Z,QTime:j.Z,QSelect:N.Z,QScrollArea:U.Z,QTable:Y.Z,QBtnDropdown:M.Z,QList:E.Z,QItem:H.Z,QItemSection:R.Z,QTd:F.Z}),B()(W,"directives",{ClosePopup:z.Z})}}]);