"use strict";(self["webpackChunkims"]=self["webpackChunkims"]||[]).push([[5890],{5890:(e,l,a)=>{a.r(l),a.d(l,{default:()=>R});var t=a(3673),o=a(2323),s=a(8880);const n={class:"q-pa-md"},u={class:"q-pa-xl"},p={class:"row q-gutter-md"},r={class:"col q-pt-md q-gutter-md"},i=(0,t._)("span",{class:"q-pl-xl"}," Update Supplier",-1),d={class:"row q-gutter-md"},c={class:"row q-gutter-md"},m={class:"col q-pt-md q-gutter-md"},h=(0,t._)("span",{class:"q-pl-xl"}," Add Bank Account ",-1),k={class:"row q-gutter-md"},b={class:"row q-gutter-md"},B=(0,t._)("div",{class:"row-12 q-pt-md q-pl-xl"},null,-1),w={class:"q-pa-xl"};function f(e,l,a,f,N,y){const S=(0,t.up)("DeleteDialogBox"),_=(0,t.up)("SupplierHeader"),g=(0,t.up)("q-input"),A=(0,t.up)("q-btn"),v=(0,t.up)("q-form"),V=(0,t.up)("q-popup-edit"),q=(0,t.up)("q-td"),x=(0,t.up)("q-tr"),U=(0,t.up)("q-table");return(0,t.wg)(),(0,t.iD)("div",n,[(0,t.Wm)(S,{onResponse:y.getResponse,ref:"confirmbox"},null,8,["onResponse"]),(0,t._)("div",u,[(0,t.Wm)(_,{Employee:!0}),(0,t._)("div",p,[(0,t._)("div",r,[i,(0,t.Wm)(v,{onSubmit:y.update_Supplier,class:"q-gutter-md"},{default:(0,t.w5)((()=>[(0,t._)("div",d,[(0,t.Wm)(g,{color:"secondary",modelValue:N.supplier.SupplierName,"onUpdate:modelValue":l[0]||(l[0]=e=>N.supplier.SupplierName=e),type:"text",filled:"",label:"Supplier Name"},null,8,["modelValue"]),(0,t.Wm)(g,{color:"secondary",modelValue:N.supplier.SupplierAddress,"onUpdate:modelValue":l[1]||(l[1]=e=>N.supplier.SupplierAddress=e),type:"text",filled:"",label:"Supplier Address"},null,8,["modelValue"]),(0,t.Wm)(g,{color:"secondary",modelValue:N.supplier.SupplierTinNumber,"onUpdate:modelValue":l[2]||(l[2]=e=>N.supplier.SupplierTinNumber=e),type:"text",filled:"",label:"Supplier Tinnumber"},null,8,["modelValue"]),(0,t.Wm)(g,{color:"secondary",modelValue:N.supplier.SupplierPhoneNumber,"onUpdate:modelValue":l[3]||(l[3]=e=>N.supplier.SupplierPhoneNumber=e),type:"text",filled:"",label:"Supplier PhoneNumber"},null,8,["modelValue"])]),(0,t._)("div",c,[(0,t.Wm)(A,{label:"Update",icon:"update",type:"submit",color:"secondary"})])])),_:1},8,["onSubmit"])]),(0,t._)("div",m,[h,(0,t.Wm)(v,{onSubmit:y.add_account,onReset:y.reset,class:"q-gutter-md"},{default:(0,t.w5)((()=>[(0,t._)("div",k,[(0,t.Wm)(g,{color:"secondary",modelValue:N.BankName,"onUpdate:modelValue":l[4]||(l[4]=e=>N.BankName=e),type:"text",filled:"",label:"BankName"},null,8,["modelValue"]),(0,t.Wm)(g,{color:"secondary",modelValue:N.BankAccount,"onUpdate:modelValue":l[5]||(l[5]=e=>N.BankAccount=e),type:"text",filled:"",label:"BankAccount"},null,8,["modelValue"])]),(0,t._)("div",b,[(0,t.Wm)(A,{label:"Add Account",type:"submit",color:"secondary"}),(0,t.Wm)(A,{label:"Reset",type:"reset",color:"secondary",flat:"",class:"q-ml-sm"})])])),_:1},8,["onSubmit","onReset"])])]),B]),(0,t._)("div",w,[(0,t.Wm)(U,{title:N.title,rows:N.rows,columns:N.columns,"row-key":"name",loading:N.loading,color:"secondary","no-data-label":"There is no bank account under this supplier"},{body:(0,t.w5)((e=>[(0,t.Wm)(x,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(q,{key:"BankName",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.row.BankName)+" ",1),(0,t.Wm)(V,{modelValue:e.row.BankName,"onUpdate:modelValue":l=>e.row.BankName=l,title:"Update Bank Name",buttons:"",persistent:"",validate:l=>y.update_supplier_bank({key:"BankName",value:l},N.rows.indexOf(e.row)),"label-set":"Update",color:"secondary",class:"text-secondary"},{default:(0,t.w5)((e=>[(0,t.Wm)(g,{color:"secondary",modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,dense:"",autofocus:"",onKeyup:(0,s.D2)(e.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])])),_:2},1032,["modelValue","onUpdate:modelValue","validate"])])),_:2},1032,["props"]),(0,t.Wm)(q,{key:"BankAccountNumber",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.row.BankAccountNumber)+" ",1),(0,t.Wm)(V,{modelValue:e.row.BankAccountNumber,"onUpdate:modelValue":l=>e.row.BankAccountNumber=l,title:"Update Bank Account Number",buttons:"",persistent:"",validate:l=>y.update_supplier_bank({key:"BankAccountNumber",value:l},N.rows.indexOf(e.row)),"label-set":"Update",color:"secondary",class:"text-secondary"},{default:(0,t.w5)((e=>[(0,t.Wm)(g,{color:"secondary",modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,dense:"",autofocus:"",onKeyup:(0,s.D2)(e.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])])),_:2},1032,["modelValue","onUpdate:modelValue","validate"])])),_:2},1032,["props"]),(0,t.Wm)(q,{key:"Delete",props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(A,{color:"negative","icon-right":"delete","no-caps":"",flat:"",dense:"",onClick:l=>y.show_dialog_box(N.rows.indexOf(e.row))},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["title","rows","columns","loading"])])])}var N=a(6966),y=a(772),S=a(7428),_=a(8956);const g={name:"UpdateSupplier",components:{DeleteDialogBox:N.Z,SupplierHeader:y.Z},data(){return{BankAccount:null,BankName:null,SupplierID:"",supplier:[],loading:!0,title:"Supplier account",columns:[{name:"BankName",label:"Bank Name",field:"BankName",align:"left",sortable:!0,required:!0},{name:"BankAccountNumber",label:"BankAccount Number",field:"BankAccountNumber",align:"left",sortable:!0,required:!0},{name:"Delete",label:"Delete",field:"Delete",required:!0}],selected_index:null,rows:[]}},methods:{fetchRows(){(0,_.yJ)(this.$route.params.SupplierID).then((e=>{this.supplier=e.data[0],null!=this.supplier.SupplierBankAccounts[0].BankAccountID?(this.rows=this.supplier.SupplierBankAccounts,this.loading=!1):this.loading=!1})).catch((e=>{this.$router.push({name:"Esuppliers"})}))},getResponse(e){if(e){const e={BankAccountID:this.rows[this.selected_index].BankAccountID};(0,_.jB)(e).then((e=>{(0,S.U)(e.data.message,"positive","top"),this.rows.splice(this.selected_index,1),this.selected_index=null,this.$refs.confirmbox.response=!1})).catch((e=>{(0,S.j)(e.response.data.message,"negative","top")}))}},reset(){this.BankAccount=null,this.BankName=null},update_supplier_bank(e,l){var a=this.rows[l],t=e;a[t.key]=t.value;const o={BankAccountID:a.BankAccountID,BankAccountNumber:a.BankAccountNumber,BankName:a.BankName};(0,_.YM)(o).then((e=>((0,S.U)(e.data.message,"positive","top"),!0))).catch((e=>((0,S.j)(e.response.data.message,"negative","top"),this.BankAccount=[],this.fetchRows(),!1)))},show_dialog_box(e){this.$refs.confirmbox.message=`${this.rows[e].BankName} `,this.$refs.confirmbox.confirm=!0,this.selected_index=e},add_account(){if(null==this.BankName)(0,S.j)("Bank Name Is Empty!!!");else if(null==this.BankAccount)(0,S.j)("Bank Account Is Empty!!!");else{const e={SupplierID:this.supplier.SupplierID,BankAccount:this.BankAccount,BankName:this.BankName};(0,_.Ti)(e).then((e=>{(0,S.U)(e.data.message,"positive","top"),this.reset(),this.rows=[],this.fetchRows()})).catch((e=>{(0,S.j)(e.response.data.message,"negative","top")}))}},update_Supplier(){const e={SupplierName:this.supplier.SupplierName,SupplierAddress:this.supplier.SupplierAddress,SupplierTinNumber:this.supplier.SupplierTinNumber,SupplierPhoneNumber:this.supplier.SupplierPhoneNumber,SupplierID:this.supplier.SupplierID};(0,_.S6)(e).then((e=>((0,S.U)(e.data.message,"positive","top"),!0))).catch((e=>((0,S.j)(e.response.data.message,"negative","top"),this.rows=[],this.fetchRows(),!1)))}},mounted(){this.fetchRows()}};var A=a(5269),v=a(4842),V=a(2165),q=a(3243),x=a(8186),U=a(3884),W=a(1289),D=a(7518),I=a.n(D);g.render=f;const R=g;I()(g,"components",{QForm:A.Z,QInput:v.Z,QBtn:V.Z,QTable:q.Z,QTr:x.Z,QTd:U.Z,QPopupEdit:W.Z})}}]);