"use strict";(self["webpackChunkims"]=self["webpackChunkims"]||[]).push([[4807],{4807:(e,a,l)=>{l.r(a),l.d(a,{default:()=>F});var t=l(3673),o=l(2323),s=l(8880);const i={class:"q-pa-lg q-mt-lg"},r={class:"col-2 q-table__title"},n={key:0,class:"col"},d={class:"q-pa-md",style:{"max-width":"300px"}},p={class:"row items-center justify-end"},u={class:"row items-center justify-end"},m={key:0},c={class:"q-pa-md",style:{"max-width":"300px"}},w={class:"row items-center justify-end"},v={class:"row items-center justify-end"},h={key:1},f={class:"row"},g=(0,t.Uk)(" Settle Credit "),_=(0,t.Uk)(" List Purchases ");function D(e,a,l,D,y,b){const N=(0,t.up)("DeleteDialogBox"),V=(0,t.up)("q-space"),W=(0,t.up)("q-toggle"),k=(0,t.up)("q-item"),U=(0,t.up)("q-select"),q=(0,t.up)("q-btn"),x=(0,t.up)("q-td"),T=(0,t.up)("q-date"),C=(0,t.up)("q-popup-proxy"),S=(0,t.up)("q-icon"),P=(0,t.up)("q-time"),R=(0,t.up)("q-input"),Y=(0,t.up)("q-popup-edit"),Z=(0,t.up)("q-badge"),O=(0,t.up)("q-tooltip"),Q=(0,t.up)("q-tr"),j=(0,t.up)("q-table"),G=(0,t.up)("q-page"),I=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.j4)(G,{padding:""},{default:(0,t.w5)((()=>[(0,t._)("div",i,[(0,t.Wm)(N,{onResponse:b.getResponse,ref:"confirmbox"},null,8,["onResponse"]),(0,t.Wm)(j,{title:y.title,rows:y.rows,columns:y.columns,"row-key":"name","visible-columns":y.visibleColumns,loading:y.loading,color:"secondary","no-data-label":"No UnShiped Data",pagination:y.pagination,"onUpdate:pagination":a[2]||(a[2]=e=>y.pagination=e),onRequest:b.handleRequest,"rows-per-page-options":[]},{top:(0,t.w5)((l=>[(0,t._)("div",r,(0,o.zw)(y.title),1),(0,t.Wm)(V),e.$q.screen.gt.xs?((0,t.wg)(),(0,t.iD)("div",n,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(b.toogle_columns,(e=>((0,t.wg)(),(0,t.j4)(k,{style:{display:"inline"},key:e},{default:(0,t.w5)((()=>[(0,t.Wm)(W,{modelValue:y.visibleColumns,"onUpdate:modelValue":a[0]||(a[0]=e=>y.visibleColumns=e),val:e.name,label:e.label,color:"secondary"},null,8,["modelValue","val","label"])])),_:2},1024)))),128))])):((0,t.wg)(),(0,t.j4)(U,{key:1,color:"secondary",modelValue:y.visibleColumns,"onUpdate:modelValue":a[1]||(a[1]=e=>y.visibleColumns=e),multiple:"",borderless:"",dense:"","options-dense":"","display-value":e.$q.lang.table.columns,"emit-value":"","map-options":"",options:y.columns,"option-value":"name",style:{"min-width":"150px"}},null,8,["modelValue","display-value","options"])),(0,t.Wm)(q,{color:"secondary","icon-right":"archive",label:"Export to csv","no-caps":"",onClick:b.exportTable},null,8,["onClick"]),(0,t.Wm)(q,{flat:"",round:"",dense:"",icon:l.inFullscreen?"fullscreen_exit":"fullscreen",onClick:l.toggleFullscreen,class:"q-ml-md"},null,8,["icon","onClick"])])),body:(0,t.w5)((e=>[(0,t.Wm)(Q,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(x,{key:"GRNNO",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.row.GRNNO),1)])),_:2},1032,["props"]),(0,t.Wm)(x,{class:"editable",key:"PurchsedDate",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.row.PurchsedDate)+" ",1),(0,t.Wm)(Y,{modelValue:e.row.PurchsedDate,"onUpdate:modelValue":a=>e.row.PurchsedDate=a,title:"Update Purchsed Date",buttons:"",persistent:"",validate:a=>b.update_grn({key:"PurchsedDate",value:a},y.rows.indexOf(e.row)),"label-set":"Update",color:"secondary",class:"text-secondary"},{default:(0,t.w5)((e=>[(0,t._)("div",d,[(0,t.Wm)(R,{color:"secondary",filled:"",modelValue:e.value,"onUpdate:modelValue":a=>e.value=a},{prepend:(0,t.w5)((()=>[(0,t.Wm)(S,{name:"event",class:"cursor-pointer"},{default:(0,t.w5)((()=>[(0,t.Wm)(C,{"transition-show":"scale","transition-hide":"scale"},{default:(0,t.w5)((()=>[(0,t.Wm)(T,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,mask:"YYYY-MM-DD HH:mm"},{default:(0,t.w5)((()=>[(0,t._)("div",p,[(0,t.wy)((0,t.Wm)(q,{label:"Close",color:"primary",flat:""},null,512),[[I]])])])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),append:(0,t.w5)((()=>[(0,t.Wm)(S,{name:"access_time",class:"cursor-pointer"},{default:(0,t.w5)((()=>[(0,t.Wm)(C,{"transition-show":"scale","transition-hide":"scale"},{default:(0,t.w5)((()=>[(0,t.Wm)(P,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,mask:"YYYY-MM-DD HH:mm"},{default:(0,t.w5)((()=>[(0,t._)("div",u,[(0,t.wy)((0,t.Wm)(q,{label:"Close",color:"primary",flat:""},null,512),[[I]])])])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue"])])])),_:2},1032,["modelValue","onUpdate:modelValue","validate"])])),_:2},1032,["props"]),(0,t.Wm)(x,{class:"editable",key:"DeliverdDate",props:e},{default:(0,t.w5)((()=>[e.row.DeliverdDate?((0,t.wg)(),(0,t.iD)("div",m,[(0,t.Uk)((0,o.zw)(e.row.DeliverdDate)+" ",1),(0,t.Wm)(Y,{modelValue:e.row.DeliverdDate,"onUpdate:modelValue":a=>e.row.DeliverdDate=a,title:"Update Deliverd Date",buttons:"",persistent:"",validate:a=>b.update_grn({key:"DeliverdDate",value:a},y.rows.indexOf(e.row)),"label-set":"Update",color:"secondary",class:"text-secondary"},{default:(0,t.w5)((e=>[(0,t._)("div",c,[(0,t.Wm)(R,{color:"secondary",filled:"",modelValue:e.value,"onUpdate:modelValue":a=>e.value=a},{prepend:(0,t.w5)((()=>[(0,t.Wm)(S,{name:"event",class:"cursor-pointer"},{default:(0,t.w5)((()=>[(0,t.Wm)(C,{"transition-show":"scale","transition-hide":"scale"},{default:(0,t.w5)((()=>[(0,t.Wm)(T,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,mask:"YYYY-MM-DD HH:mm"},{default:(0,t.w5)((()=>[(0,t._)("div",w,[(0,t.wy)((0,t.Wm)(q,{label:"Close",color:"primary",flat:""},null,512),[[I]])])])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),append:(0,t.w5)((()=>[(0,t.Wm)(S,{name:"access_time",class:"cursor-pointer"},{default:(0,t.w5)((()=>[(0,t.Wm)(C,{"transition-show":"scale","transition-hide":"scale"},{default:(0,t.w5)((()=>[(0,t.Wm)(P,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,mask:"YYYY-MM-DD HH:mm"},{default:(0,t.w5)((()=>[(0,t._)("div",v,[(0,t.wy)((0,t.Wm)(q,{label:"Close",color:"primary",flat:""},null,512),[[I]])])])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue"])])])),_:2},1032,["modelValue","onUpdate:modelValue","validate"])])):((0,t.wg)(),(0,t.iD)("div",h,[(0,t._)("div",f,[(0,t.Wm)(q,{to:{name:"Eship-grn",params:{GRNNO:e.row.GRNNO}},flat:"",color:"negative",icon:"local_shipping",label:""},null,8,["to"])])]))])),_:2},1032,["props"]),(0,t.Wm)(x,{class:"editable",key:"SupplierName",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.row.SupplierName)+" ",1),(0,t.Wm)(Y,{modelValue:e.row.SupplierName,"onUpdate:modelValue":a=>e.row.SupplierName=a,title:"Update Supplier Name",buttons:"",persistent:"",validate:a=>b.update_grn({key:"SupplierName",value:a},y.rows.indexOf(e.row)),"label-set":"Update",color:"secondary",class:"text-secondary"},{default:(0,t.w5)((e=>[(0,t.Wm)(U,{color:"secondary",modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,hint:"select Supplier",options:y.suppliers_options.map((e=>e.SupplierName)),label:"Supplier",dense:"",autofocus:"",onKeyup:(0,s.D2)(e.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","options","onKeyup"])])),_:2},1032,["modelValue","onUpdate:modelValue","validate"])])),_:2},1032,["props"]),(0,t.Wm)(x,{key:"TransactionType",props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(Z,{color:"Cash"===e.row.TransactionType?"orange":"blue","text-color":"{2:black}",label:e.row.TransactionType},null,8,["color","label"])])),_:2},1032,["props"]),(0,t.Wm)(x,{class:"editable",key:"DriverName",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.row.DriverName)+" ",1),(0,t.Wm)(Y,{modelValue:e.row.DriverName,"onUpdate:modelValue":a=>e.row.DriverName=a,title:"Update Driver Name",buttons:"",persistent:"",validate:a=>b.update_grn({key:"DriverName",value:a},y.rows.indexOf(e.row)),"label-set":"Update",color:"secondary",class:"text-secondary"},{default:(0,t.w5)((e=>[(0,t.Wm)(U,{color:"secondary",modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,hint:"select Driver",options:y.drivers_options.map((e=>e.DriverName)),label:"Driver",dense:"",autofocus:"",onKeyup:(0,s.D2)(e.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","options","onKeyup"])])),_:2},1032,["modelValue","onUpdate:modelValue","validate"])])),_:2},1032,["props"]),(0,t.Wm)(x,{key:"Total",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.row.Total),1)])),_:2},1032,["props"]),(0,t.Wm)(x,{key:"CreditSettlement",props:e},{default:(0,t.w5)((()=>["Credit"==e.row.TransactionType?((0,t.wg)(),(0,t.j4)(q,{key:0,color:"blue","icon-right":"payments","no-caps":"",flat:"",dense:""},{default:(0,t.w5)((()=>[(0,t.Wm)(O,null,{default:(0,t.w5)((()=>[g])),_:1})])),_:1})):(0,t.kq)("",!0)])),_:2},1032,["props"]),(0,t.Wm)(x,{key:"Delete",props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(q,{color:"positive","icon-right":"open_in_new","no-caps":"",flat:"",dense:"",to:{name:"Egrn-detail",params:{GRNNO:e.row.GRNNO}}},{default:(0,t.w5)((()=>[(0,t.Wm)(O,null,{default:(0,t.w5)((()=>[_])),_:1})])),_:2},1032,["to"])])),_:2},1032,["props"]),(0,t.Wm)(x,{key:"Delete",props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(q,{color:"negative","icon-right":"delete","no-caps":"",flat:"",dense:"",onClick:a=>b.show_dialog_box(y.rows.indexOf(e.row))},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["title","rows","columns","visible-columns","loading","pagination","onRequest"])])])),_:1})}var y=l(6966),b=l(2841),N=l(5616),V=l(5547),W=l(8956),k=l(8554),U=l(7428);const q={name:"Shipment",components:{DeleteDialogBox:y.Z},data(){return{search_data:{page:1,order:"Descending"},TransactionType:[{ID:1,Type:"Cash"},{ID:2,Type:"Credit"}],loading:!0,title:"Shiped Purchases",rows:[],visibleColumns:["PurchsedDate","DeliverdDate","SupplierName","TransactionType","DriverName"],columns:[{name:"GRNNO",label:"GRNNO",field:"GRNNO",align:"left",required:!0},{name:"PurchsedDate",label:"Purchsed Date",field:"PurchsedDate",align:"center"},{name:"DeliverdDate",label:"Deliverd Date",field:"DeliverdDate",align:"center"},{name:"SupplierName",label:"Supplier Name",field:"SupplierName",align:"center"},{name:"TransactionType",label:"Transaction Type",field:"TransactionType",align:"center"},{name:"DriverName",label:"Driver Name",field:"DriverName",align:"center"},{name:"Total",label:"Total Amount ",field:"Total",required:!0,align:"center"},{name:"CreditSettlement",label:"Credit Settlement",field:"CreditSettlement",required:!0,align:"center"},{name:"PurchaseItems",label:"Puchased Items",field:"PurchaseItems",align:"center",required:!0},{name:"Delete",label:"Delete",field:"Delete",required:!0,align:"center"}],suppliers_options:[],drivers_options:[],pagination:{descending:!1,page:1,rowsPerPage:2}}},computed:{toogle_columns(){return this.columns.filter((e=>!0!==e.required))}},methods:{handleRequest(e){this.fetch_rows(e.pagination.page)},request_data_builder(e){var a=this.search_data;return a.page=e,a},fetch_rows(e){(0,V.fN)(this.request_data_builder(e)).then((e=>{const a=e.data.meta_data;this.pagination.page=a.current_page,this.pagination.rowsPerPage=a.per_page,this.pagination.rowsNumber=a.total,this.rows=e.data.data,this.loading=!1})).catch((e=>{this.rows=[],this.rows=e.response.data.data,this.loading=!1}))},date_fromat(e){return N.ZP.formatDate(e,"YYYY-MM-DD HH:mm")},getResponse(e){if(e){const e={GRNNO:this.rows[this.selected_index].GRNNO};(0,V.Ep)(e).then((e=>{(0,U.U)(e.data.message,"positive","top"),this.rows.splice(this.selected_index,1),this.selected_index=null,this.$refs.confirmbox.response=!1})).catch((e=>{(0,U.j)(e.response.data.message,"negative","top")}))}},update_grn(e,a){var l=this.rows[a],t=e;l[t.key]=t.value;var o=this.drivers_options.find((e=>e.DriverName===l.DriverName));const s={PurchsedDate:l.PurchsedDate,DeliverdDate:l.DeliverdDate,SupplierID:this.suppliers_options.find((e=>e.SupplierName===l.SupplierName)).SupplierID,DriverID:o?o.DriverID:"",GRNNO:l.GRNNO};(0,V.wj)(s).then((e=>((0,U.U)(e.data.message,"positive","top"),this.row=[],this.fetch_rows(this.pagination.current_page),!0))).catch((e=>((0,U.j)(e.response.data.message,"negative","top"),this.rows=[],this.fetchRows(),!1)))},show_dialog_box(e){this.$refs.confirmbox.message=`GRNNO ${this.rows[e].GRNNO} `,this.$refs.confirmbox.confirm=!0,this.selected_index=e},wrapCsvValue(e,a){let l=void 0!==a?a(e):e;return l=void 0===l||null===l?"":String(l),l=l.split('"').join('""'),`"${l}"`},exportTable(){const e=[this.columns.map((e=>this.wrapCsvValue(e.label)))].concat(this.rows.map((e=>this.columns.map((a=>this.wrapCsvValue("function"===typeof a.field?a.field(e):e[void 0===a.field?a.name:a.field],a.format))).join(",")))).join("\r\n"),a=(0,b.Z)("table-export.csv",e,"text/csv");!0!==a&&(0,U.j)("Browser denied file download...")}},mounted(){this.fetch_rows(1),(0,W.rH)().then((e=>{this.suppliers_options=e.data})).catch((e=>{this.suppliers_options=[]})),(0,k.jT)().then((e=>{this.drivers_options=e.data})).catch((e=>{}))}};var x=l(4379),T=l(3243),C=l(2025),S=l(3414),P=l(8886),R=l(8516),Y=l(2165),Z=l(8186),O=l(3884),Q=l(1289),j=l(4842),G=l(4554),I=l(3944),H=l(2651),M=l(5990),z=l(9721),$=l(8870),B=l(677),E=l(7518),K=l.n(E);q.render=D,q.__scopeId="data-v-279b7a19";const F=q;K()(q,"components",{QPage:x.Z,QTable:T.Z,QSpace:C.Z,QItem:S.Z,QToggle:P.Z,QSelect:R.Z,QBtn:Y.Z,QTr:Z.Z,QTd:O.Z,QPopupEdit:Q.Z,QInput:j.Z,QIcon:G.Z,QPopupProxy:I.Z,QDate:H.Z,QTime:M.Z,QBadge:z.Z,QTooltip:$.Z}),K()(q,"directives",{ClosePopup:B.Z})}}]);