"use strict";(self["webpackChunkims"]=self["webpackChunkims"]||[]).push([[6329],{6329:(e,a,l)=>{l.r(a),l.d(a,{default:()=>S});var o=l(3673),t=l(2323),n=l(8880);const s=(0,o._)("div",{class:"q-gutter-md"},null,-1),r={class:"q-pa-md"},i={class:"q-pa-xl"},d={class:"row q-gutter-md"},u={class:"col q-pt-md q-gutter-md"},c=(0,o._)("span",{class:"q-pl-xl"}," Add Bank Account",-1),m={class:"row q-gutter-md"},p={class:"column"},g={class:"row q-pa-lg q-gutter-lg"},h={class:"row q-pa-lg q-gutter-lg"},w=(0,o._)("div",{class:"row-12 q-pt-md q-pl-xl"},null,-1),b={class:"q-pa-xl"},f={class:"row q-gutter-md"},_={class:"col-2 q-table__title"},v={key:0,class:"col"};function k(e,a,l,k,y,B){const N=(0,o.up)("DeleteDialogBox"),q=(0,o.up)("q-input"),x=(0,o.up)("q-btn"),V=(0,o.up)("q-form"),A=(0,o.up)("q-select"),W=(0,o.up)("q-space"),U=(0,o.up)("q-toggle"),D=(0,o.up)("q-item"),C=(0,o.up)("q-td"),P=(0,o.up)("q-popup-edit"),R=(0,o.up)("q-tr"),Z=(0,o.up)("q-table"),I=(0,o.up)("q-page");return(0,o.wg)(),(0,o.j4)(I,{padding:""},{default:(0,o.w5)((()=>[s,(0,o._)("div",r,[(0,o.Wm)(N,{onResponse:B.getResponse,ref:"confirmbox"},null,8,["onResponse"]),(0,o._)("div",i,[(0,o._)("div",d,[(0,o._)("div",u,[c,(0,o.Wm)(V,{onSubmit:B.add_peType,onReset:B.onReset,class:"q-gutter-md"},{default:(0,o.w5)((()=>[(0,o._)("div",m,[(0,o._)("div",p,[(0,o._)("div",g,[(0,o.Wm)(q,{color:"secondary",modelValue:y.BankName,"onUpdate:modelValue":a[0]||(a[0]=e=>y.BankName=e),type:"text",min:"1",filled:"",label:"Bank Name",rules:[B.myRule]},null,8,["modelValue","rules"]),(0,o.Wm)(q,{color:"secondary",modelValue:y.AccountNumber,"onUpdate:modelValue":a[1]||(a[1]=e=>y.AccountNumber=e),type:"text",min:"1",filled:"",label:"Account Number",rules:[B.myRule]},null,8,["modelValue","rules"])]),(0,o._)("div",h,[(0,o.Wm)(x,{label:"Add Bank Account",type:"submit",color:"secondary"}),(0,o.Wm)(x,{label:"Reset",type:"reset",color:"secondary",flat:"",class:"q-ml-sm"})])])])])),_:1},8,["onSubmit","onReset"])])]),w]),(0,o._)("div",b,[(0,o.Wm)(Z,{title:y.title,rows:y.rows,columns:y.columns,"row-key":"CustomerTable","visible-columns":y.visibleColumns,loading:y.loading,color:"secondary",pagination:y.pagination,"onUpdate:pagination":a[8]||(a[8]=e=>y.pagination=e),onRequest:B.handleRequest,"rows-per-page-options":[]},{"top-right":(0,o.w5)((()=>[(0,o._)("div",f,[(0,o.Wm)(q,{color:"secondary",style:{width:"150px"},modelValue:y.search_data.BankName,"onUpdate:modelValue":a[2]||(a[2]=e=>y.search_data.BankName=e),outlined:"",filled:"",type:"text",label:"Bank Name"},null,8,["modelValue"]),(0,o.Wm)(A,{color:"secondary",style:{width:"150px"},modelValue:y.search_data.order,"onUpdate:modelValue":a[3]||(a[3]=e=>y.search_data.order=e),options:["Ascending ","Descending "],label:"Order Type",filled:""},null,8,["modelValue"]),(0,o.Wm)(x,{label:"Search",color:"secondary","icon-right":"search","no-caps":"",flat:"",dense:"",onClick:a[4]||(a[4]=e=>B.search())}),(0,o.Wm)(x,{label:"Reset",color:"negative","no-caps":"",flat:"",dense:"",onClick:a[5]||(a[5]=e=>B.reset())})])])),"top-left":(0,o.w5)((l=>[(0,o._)("div",_,(0,t.zw)(y.title),1),(0,o.Wm)(W),e.$q.screen.gt.xs?((0,o.wg)(),(0,o.iD)("div",v,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(B.toogle_columns,(e=>((0,o.wg)(),(0,o.j4)(D,{style:{display:"inline"},key:e},{default:(0,o.w5)((()=>[(0,o.Wm)(U,{modelValue:y.visibleColumns,"onUpdate:modelValue":a[6]||(a[6]=e=>y.visibleColumns=e),val:e.name,label:e.label,color:"secondary"},null,8,["modelValue","val","label"])])),_:2},1024)))),128))])):((0,o.wg)(),(0,o.j4)(A,{key:1,color:"secondary",modelValue:y.visibleColumns,"onUpdate:modelValue":a[7]||(a[7]=e=>y.visibleColumns=e),multiple:"",borderless:"",dense:"","options-dense":"","display-value":e.$q.lang.table.columns,"emit-value":"","map-options":"",options:y.columns,"option-value":"name",style:{"min-width":"150px"}},null,8,["modelValue","display-value","options"])),(0,o.Wm)(x,{color:"secondary","icon-right":"archive",label:"Export to csv","no-caps":"",onClick:B.exportTable},null,8,["onClick"]),(0,o.Wm)(x,{flat:"",round:"",dense:"",icon:l.inFullscreen?"fullscreen_exit":"fullscreen",onClick:l.toggleFullscreen,class:"q-ml-md"},null,8,["icon","onClick"])])),body:(0,o.w5)((e=>[(0,o.Wm)(R,{props:e},{default:(0,o.w5)((()=>[(0,o.Wm)(C,{key:"PBID",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,t.zw)(e.row.PBID),1)])),_:2},1032,["props"]),(0,o.Wm)(C,{key:"AccountNumber",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,t.zw)(e.row.AccountNumber)+" ",1),(0,o.Wm)(P,{modelValue:e.row.AccountNumber,"onUpdate:modelValue":a=>e.row.AccountNumber=a,modelModifiers:{number:!0},title:"Update Account Number",buttons:"",persistent:"",validate:a=>B.update_petype({key:"AccountNumber",value:a},y.rows.indexOf(e.row)),"label-set":"Update",color:"secondary",class:"text-secondary"},{default:(0,o.w5)((e=>[(0,o.Wm)(q,{color:"secondary",type:"text",modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,dense:"",autofocus:"",onKeyup:(0,n.D2)(e.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])])),_:2},1032,["modelValue","onUpdate:modelValue","validate"])])),_:2},1032,["props"]),(0,o.Wm)(C,{key:"BankName",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,t.zw)(e.row.BankName)+" ",1),(0,o.Wm)(P,{modelValue:e.row.BankName,"onUpdate:modelValue":a=>e.row.BankName=a,modelModifiers:{number:!0},title:"Update BankName",buttons:"",persistent:"",validate:a=>B.update_petype({key:"BankName",value:a},y.rows.indexOf(e.row)),"label-set":"Update",color:"secondary",class:"text-secondary"},{default:(0,o.w5)((e=>[(0,o.Wm)(q,{color:"secondary",type:"text",modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,dense:"",autofocus:"",onKeyup:(0,n.D2)(e.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])])),_:2},1032,["modelValue","onUpdate:modelValue","validate"])])),_:2},1032,["props"]),(0,o.Wm)(C,{key:"Delete",props:e},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{color:"orange","icon-right":"open_in_new","no-caps":"",flat:"",dense:"",to:{name:"bank-transaction",params:{PBID:e.row.PBID}}},null,8,["to"])])),_:2},1032,["props"]),(0,o.Wm)(C,{key:"Delete",props:e},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{color:"negative","icon-right":"delete","no-caps":"",flat:"",dense:"",onClick:a=>B.show_dialog_box(y.rows.indexOf(e.row))},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["title","rows","columns","visible-columns","loading","pagination","onRequest"])])])])),_:1})}var y=l(6966),B=l(2841),N=l(7428),q=l(5110);const x={name:"BankAccount",components:{DeleteDialogBox:y.Z},data(){return{pagination:{descending:!1,page:1,rowsPerPage:2},search_data:{page:1,BankName:"",order:"Ascending"},BankName:null,AccountNumber:null,loading:!0,title:"Personal Bank Accounts",visibleColumns:["AccountNumber","BankName"],columns:[{name:"PBID",label:"PBID",field:"PBID",align:"left",sortable:!0,required:!0},{name:"AccountNumber",label:"Bank Account Number",field:"AccountNumber",align:"center",sortable:!0},{name:"BankName",label:"BankName",field:"BankName",align:"center",sortable:!0},{name:"More",label:"Transaction",field:"More",required:!0},{name:"Delete",label:"Delete",field:"Delete",required:!0}],selected_index:null,rows:[]}},computed:{toogle_columns(){return this.columns.filter((e=>!0!==e.required))}},methods:{handleRequest(e){this.fetch_rows(e.pagination.page)},reset(){this.search_data={page:1,BankName:"",order:"Ascending"},this.fetch_rows(1)},search(){this.fetch_rows(1)},request_data_builder(e){var a=this.search_data;return a.page=e,a},fetch_rows(e){(0,q.tc)(this.request_data_builder(e)).then((e=>{const a=e.data.meta_data;this.pagination.page=a.current_page,this.pagination.rowsPerPage=a.per_page,this.pagination.rowsNumber=a.total,this.rows=e.data.data,this.loading=!1})).catch((e=>{this.rows=[],this.rows=e.response.data.data,this.loading=!1}))},myRule(e){if(null===e)return"Empty Feild!!"},getResponse(e){if(e){const e={PBID:this.rows[this.selected_index].PBID};(0,q.ZM)(e).then((e=>{(0,N.U)(e.data.message,"positive","top"),this.rows.splice(this.selected_index,1),this.selected_index=null,this.$refs.confirmbox.response=!1})).catch((e=>{(0,N.j)(e.response.data.message,"negative","top")}))}},add_peType(){const e={AccountNumber:this.AccountNumber,BankName:this.BankName};(0,q.Uu)(e).then((e=>{(0,N.U)(e.data.message,"positive","top"),this.rows=[],this.fetch_rows()})).catch((e=>{(0,N.j)(e.response.data.message,"negative","top")}))},onReset(){this.BankName=null,this.AccountNumber=null},update_petype(e,a){var l=this.rows[a],o=e;l[o.key]=o.value;const t={PBID:l.PBID,AccountNumber:l.AccountNumber,BankName:l.BankName};(0,q.AG)(t).then((e=>((0,N.U)(e.data.message,"positive","top"),!0))).catch((e=>((0,N.j)(e.response.data.message,"negative","top"),this.BankAccount=[],this.fetch_rows(),!1)))},show_dialog_box(e){this.$refs.confirmbox.message=`${this.rows[e].BankName}`,this.$refs.confirmbox.confirm=!0,this.selected_index=e},wrapCsvValue(e,a){let l=void 0!==a?a(e):e;return l=void 0===l||null===l?"":String(l),l=l.split('"').join('""'),`"${l}"`},exportTable(){const e=[this.columns.map((e=>this.wrapCsvValue(e.label)))].concat(this.rows.map((e=>this.columns.map((a=>this.wrapCsvValue("function"===typeof a.field?a.field(e):e[void 0===a.field?a.name:a.field],a.format))).join(",")))).join("\r\n"),a=(0,B.Z)("table-export.csv",e,"text/csv");!0!==a&&(0,N.j)("Browser denied file download...")}},mounted(){this.fetch_rows()}};var V=l(4379),A=l(5269),W=l(4842),U=l(2165),D=l(3243),C=l(8516),P=l(2025),R=l(3414),Z=l(8886),I=l(8186),Q=l(3884),T=l(1289),j=l(7518),$=l.n(j);x.render=k;const S=x;$()(x,"components",{QPage:V.Z,QForm:A.Z,QInput:W.Z,QBtn:U.Z,QTable:D.Z,QSelect:C.Z,QSpace:P.Z,QItem:R.Z,QToggle:Z.Z,QTr:I.Z,QTd:Q.Z,QPopupEdit:T.Z})}}]);