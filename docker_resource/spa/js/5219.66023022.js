"use strict";(self["webpackChunkims"]=self["webpackChunkims"]||[]).push([[5219],{5219:(e,t,o)=>{o.r(t),o.d(t,{default:()=>R});var a=o(3673),s=o(2323),l=o(8880);const n={class:"q-pa-md"},u={class:"q-pa-xl"},m={class:"row q-gutter-md"},r={class:"col q-pt-md q-gutter-md"},d=(0,a._)("span",{class:"q-pl-xl"}," Update Customer",-1),c={class:"row q-gutter-md"},i={class:"row q-gutter-md"},p={class:"col q-pt-md q-gutter-md"},h=(0,a._)("span",{class:"q-pl-xl"}," Add Bank Account ",-1),k={class:"row q-gutter-md"},C={class:"row q-gutter-md"},b=(0,a._)("div",{class:"row-12 q-pt-md q-pl-xl"},null,-1),B={class:"q-pa-xl"};function w(e,t,o,w,f,y){const _=(0,a.up)("DeleteDialogBox"),g=(0,a.up)("CustomerHeader"),A=(0,a.up)("q-input"),N=(0,a.up)("q-btn"),v=(0,a.up)("q-form"),V=(0,a.up)("q-popup-edit"),q=(0,a.up)("q-td"),x=(0,a.up)("q-tr"),U=(0,a.up)("q-table");return(0,a.wg)(),(0,a.iD)("div",n,[(0,a.Wm)(_,{onResponse:y.getResponse,ref:"confirmbox"},null,8,["onResponse"]),(0,a._)("div",u,[(0,a.Wm)(g),(0,a._)("div",m,[(0,a._)("div",r,[d,(0,a.Wm)(v,{onSubmit:y.update_Customer,class:"q-gutter-md"},{default:(0,a.w5)((()=>[(0,a._)("div",c,[(0,a.Wm)(A,{color:"secondary",modelValue:f.Customer.CustomerName,"onUpdate:modelValue":t[0]||(t[0]=e=>f.Customer.CustomerName=e),type:"text",filled:"",label:"Customer Name"},null,8,["modelValue"]),(0,a.Wm)(A,{color:"secondary",modelValue:f.Customer.CustomerAddress,"onUpdate:modelValue":t[1]||(t[1]=e=>f.Customer.CustomerAddress=e),type:"text",filled:"",label:"Customer Address"},null,8,["modelValue"]),(0,a.Wm)(A,{color:"secondary",modelValue:f.Customer.CustomerTinNumber,"onUpdate:modelValue":t[2]||(t[2]=e=>f.Customer.CustomerTinNumber=e),type:"text",filled:"",label:"Customer Tinnumber"},null,8,["modelValue"]),(0,a.Wm)(A,{color:"secondary",modelValue:f.Customer.CustomerPhoneNumber,"onUpdate:modelValue":t[3]||(t[3]=e=>f.Customer.CustomerPhoneNumber=e),type:"text",filled:"",label:"Customer PhoneNumber"},null,8,["modelValue"])]),(0,a._)("div",i,[(0,a.Wm)(N,{label:"Update",icon:"update",type:"submit",color:"secondary"})])])),_:1},8,["onSubmit"])]),(0,a._)("div",p,[h,(0,a.Wm)(v,{onSubmit:y.add_account,onReset:y.reset,class:"q-gutter-md"},{default:(0,a.w5)((()=>[(0,a._)("div",k,[(0,a.Wm)(A,{color:"secondary",modelValue:f.BankName,"onUpdate:modelValue":t[4]||(t[4]=e=>f.BankName=e),type:"text",filled:"",label:"BankName"},null,8,["modelValue"]),(0,a.Wm)(A,{color:"secondary",modelValue:f.BankAccount,"onUpdate:modelValue":t[5]||(t[5]=e=>f.BankAccount=e),type:"text",filled:"",label:"BankAccount"},null,8,["modelValue"])]),(0,a._)("div",C,[(0,a.Wm)(N,{label:"Add Account",type:"submit",color:"secondary"}),(0,a.Wm)(N,{label:"Reset",type:"reset",color:"secondary",flat:"",class:"q-ml-sm"})])])),_:1},8,["onSubmit","onReset"])])]),b]),(0,a._)("div",B,[(0,a.Wm)(U,{title:f.title,rows:f.rows,columns:f.columns,"row-key":"name",loading:f.loading,color:"secondary","no-data-label":"There is no bank account under this Customer"},{body:(0,a.w5)((e=>[(0,a.Wm)(x,{props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(q,{key:"BankName",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(e.row.BankName)+" ",1),(0,a.Wm)(V,{modelValue:e.row.BankName,"onUpdate:modelValue":t=>e.row.BankName=t,title:"Update Bank Name",buttons:"",persistent:"",validate:t=>y.update_Customer_bank({key:"BankName",value:t},f.rows.indexOf(e.row)),"label-set":"Update",color:"secondary",class:"text-secondary"},{default:(0,a.w5)((e=>[(0,a.Wm)(A,{color:"secondary",modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,dense:"",autofocus:"",onKeyup:(0,l.D2)(e.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])])),_:2},1032,["modelValue","onUpdate:modelValue","validate"])])),_:2},1032,["props"]),(0,a.Wm)(q,{key:"BankAccount",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(e.row.BankAccount)+" ",1),(0,a.Wm)(V,{modelValue:e.row.BankAccount,"onUpdate:modelValue":t=>e.row.BankAccount=t,title:"Update Bank Account Number",buttons:"",persistent:"",validate:t=>y.update_Customer_bank({key:"BankAccount",value:t},f.rows.indexOf(e.row)),"label-set":"Update",color:"secondary",class:"text-secondary"},{default:(0,a.w5)((e=>[(0,a.Wm)(A,{color:"secondary",modelValue:e.value,"onUpdate:modelValue":t=>e.value=t,dense:"",autofocus:"",onKeyup:(0,l.D2)(e.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])])),_:2},1032,["modelValue","onUpdate:modelValue","validate"])])),_:2},1032,["props"]),(0,a.Wm)(q,{key:"Delete",props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(N,{color:"negative","icon-right":"delete","no-caps":"",flat:"",dense:"",onClick:t=>y.show_dialog_box(f.rows.indexOf(e.row))},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["title","rows","columns","loading"])])])}var f=o(6966),y=o(6881),_=o(7428),g=o(2530);const A={name:"UpdateCustomer",components:{DeleteDialogBox:f.Z,CustomerHeader:y.Z},data(){return{BankAccount:null,BankName:null,CustomerID:"",Customer:[],loading:!0,title:"Customer account",columns:[{name:"BankName",label:"Bank Name",field:"BankName",align:"left",sortable:!0,required:!0},{name:"BankAccount",label:"BankAccount Number",field:"BankAccount",align:"left",sortable:!0,required:!0},{name:"Delete",label:"Delete",field:"Delete",required:!0}],selected_index:null,rows:[]}},methods:{fetchRows(){(0,g.HJ)(this.$route.params.CustomerID).then((e=>{this.Customer=e.data[0],null!=this.Customer.CustomerBankAccounts[0].BankAccountID?(this.rows=this.Customer.CustomerBankAccounts,this.loading=!1):this.loading=!1})).catch((e=>{this.$router.push({name:"Customers"})}))},getResponse(e){if(e){const e={BankAccountID:this.rows[this.selected_index].BankAccountID};(0,g.dZ)(e).then((e=>{(0,_.U)(e.data.message,"positive","top"),this.rows.splice(this.selected_index,1),this.selected_index=null,this.$refs.confirmbox.response=!1})).catch((e=>{(0,_.j)(e.response.data.message,"negative","top")}))}},reset(){this.BankAccount=null,this.BankName=null},update_Customer_bank(e,t){var o=this.rows[t],a=e;o[a.key]=a.value;const s={BankAccountID:o.BankAccountID,BankAccount:o.BankAccount,BankName:o.BankName};(0,g.Ry)(s).then((e=>((0,_.U)(e.data.message,"positive","top"),!0))).catch((e=>((0,_.j)(e.response.data.message,"negative","top"),this.BankAccount=[],this.fetchRows(),!1)))},show_dialog_box(e){this.$refs.confirmbox.message=`${this.rows[e].BankName} `,this.$refs.confirmbox.confirm=!0,this.selected_index=e},add_account(){if(null==this.BankName)(0,_.j)("Bank Name Is Empty!!!");else if(null==this.BankAccount)(0,_.j)("Bank Account Is Empty!!!");else{const e={CustomerID:this.Customer.CustomerID,BankAccount:this.BankAccount,BankName:this.BankName};(0,g.Ti)(e).then((e=>{(0,_.U)(e.data.message,"positive","top"),this.reset(),this.rows=[],this.fetchRows()})).catch((e=>{(0,_.j)(e.response.data.message,"negative","top")}))}},update_Customer(){const e={CustomerName:this.Customer.CustomerName,CustomerAddress:this.Customer.CustomerAddress,CustomerTinNumber:this.Customer.CustomerTinNumber,CustomerPhoneNumber:this.Customer.CustomerPhoneNumber,CustomerID:this.Customer.CustomerID};(0,g.uG)(e).then((e=>((0,_.U)(e.data.message,"positive","top"),!0))).catch((e=>((0,_.j)(e.response.data.message,"negative","top"),this.rows=[],this.fetchRows(),!1)))}},mounted(){this.fetchRows()}};var N=o(5269),v=o(4842),V=o(2165),q=o(3243),x=o(8186),U=o(3884),W=o(1289),D=o(7518),I=o.n(D);A.render=w;const R=A;I()(A,"components",{QForm:N.Z,QInput:v.Z,QBtn:V.Z,QTable:q.Z,QTr:x.Z,QTd:U.Z,QPopupEdit:W.Z})}}]);