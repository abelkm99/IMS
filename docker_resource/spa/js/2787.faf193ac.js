"use strict";(self["webpackChunkims"]=self["webpackChunkims"]||[]).push([[2787],{2787:(e,t,o)=>{o.r(t),o.d(t,{default:()=>M});var r=o(3673),a=o(2323);const s={class:"q-pa-lg justify-center"},n={class:"col"},l={class:"row q-gutter-md justify-center"},i={class:"row q-gutter-md justify-between"},c={class:"col-4"},p={class:"col-4 q-pt-xl"},d={style:{width:"500px"},class:"row q-gutter-sm"},u={class:"col"},h=(0,r._)("div",{class:"row justify-center"},[(0,r._)("h3",null,"Report")],-1),m={class:"col q-gutter-md"},w={class:"col-2 q-table__title"},R={class:"row q-gutter-md"},f={key:0},b={class:"text-h6"},g={class:"col-2 q-table__title"},v={class:"row q-gutter-md"};function T(e,t,o,T,y,_){const k=(0,r.up)("q-date"),C=(0,r.up)("q-select"),E=(0,r.up)("q-btn"),D=(0,r.up)("q-space"),x=(0,r.up)("q-td"),P=(0,r.up)("q-tr"),B=(0,r.up)("q-table"),S=(0,r.up)("q-card-section"),q=(0,r.up)("q-card"),I=(0,r.up)("q-dialog"),A=(0,r.up)("q-page"),G=(0,r.Q2)("close-popup");return(0,r.wg)(),(0,r.j4)(A,{padding:""},{default:(0,r.w5)((()=>[(0,r._)("div",s,[(0,r._)("div",n,[(0,r._)("div",l,[(0,r._)("div",i,[(0,r._)("div",c,[(0,r.Wm)(k,{color:"orange",modelValue:y.dateRange,"onUpdate:modelValue":t[0]||(t[0]=e=>y.dateRange=e),range:""},null,8,["modelValue"])]),(0,r._)("div",p,[(0,r.Wm)(C,{color:"secondary",style:{"max-width":"300px"},modelValue:y.option,"onUpdate:modelValue":t[1]||(t[1]=e=>y.option=e),options:y.reportMethods,label:"Report Option",filled:"",rules:[_.myRule]},null,8,["modelValue","options","rules"]),(0,r._)("div",d,[(0,r.Wm)(E,{label:"Todays Report",onClick:t[2]||(t[2]=e=>_.todayReport()),color:"orange"}),(0,r.Wm)(E,{label:"Generate Range",onClick:t[3]||(t[3]=e=>_.onSubmit()),color:"orange"}),(0,r.Wm)(E,{label:"Reset",type:"reset",color:"negative",flat:"",class:"q-ml-sm"})])])])])]),(0,r._)("div",u,[h,(0,r._)("div",m,[(0,r._)("div",null,[(0,r.Wm)(B,{title:"Report",columns:y.columns,rows:_.transformer(y.rows),"row-key":"CustomerTable",color:"secondary",pagination:y.pagination,"hide-pagination":!0},{top:(0,r.w5)((e=>[(0,r._)("div",w,(0,a.zw)(y.title),1),(0,r.Wm)(D),(0,r._)("div",R,[(0,r.Wm)(E,{to:{name:"print",params:{user:_.printable_data}},color:"secondary",icon:"print",label:"Print"},null,8,["to"]),(0,r.Wm)(E,{color:"secondary","icon-right":"archive",label:"Export to csv","no-caps":"",onClick:_.exportTable},null,8,["onClick"]),(0,r.Wm)(E,{flat:"",round:"",dense:"",icon:e.inFullscreen?"fullscreen_exit":"fullscreen",onClick:e.toggleFullscreen,class:"q-ml-md"},null,8,["icon","onClick"])])])),body:(0,r.w5)((e=>[(0,r.Wm)(P,{props:e},{default:(0,r.w5)((()=>[(0,r.Wm)(x,{key:"Attribute",props:e},{default:(0,r.w5)((()=>[(0,r.Uk)((0,a.zw)(e.row.Attribute),1)])),_:2},1032,["props"]),(0,r.Wm)(x,{key:"Value",props:e},{default:(0,r.w5)((()=>[(0,r.Uk)((0,a.zw)(e.row.Value),1)])),_:2},1032,["props"]),(0,r.Wm)(x,{key:"More",props:e},{default:(0,r.w5)((()=>[y.IgnoredColumns.includes(e.row.Attribute)?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",f,[(0,r.Wm)(E,{color:"orange",icon:"read_more",onClick:t=>_.functionMapper(e.row.Attribute)},null,8,["onClick"])]))])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["columns","rows","pagination"])]),(0,r.Wm)(I,{modelValue:y.Rshow,"onUpdate:modelValue":t[4]||(t[4]=e=>y.Rshow=e)},{default:(0,r.w5)((()=>[(0,r.Wm)(q,{style:{"max-width":"100%"}},{default:(0,r.w5)((()=>[(0,r.Wm)(S,{class:"row items-center q-pb-none"},{default:(0,r.w5)((()=>[(0,r._)("div",b,(0,a.zw)(y.Rtitle),1),(0,r.Wm)(D),(0,r.wy)((0,r.Wm)(E,{icon:"close",color:"negative",flat:"",round:"",dense:""},null,512),[[G]])])),_:1}),(0,r.Wm)(B,{columns:y.Rcolumns,rows:y.Rrows,"row-key":"CustomerTable",color:"secondary"},{top:(0,r.w5)((e=>[(0,r._)("div",g,(0,a.zw)(y.title),1),(0,r.Wm)(D),(0,r._)("div",v,[(0,r.Wm)(E,{color:"secondary","icon-right":"archive",label:"Export to csv","no-caps":"",onClick:_.exportTablePopUP},null,8,["onClick"]),(0,r.Wm)(E,{flat:"",round:"",dense:"",icon:e.inFullscreen?"fullscreen_exit":"fullscreen",onClick:e.toggleFullscreen,class:"q-ml-md"},null,8,["icon","onClick"])])])),_:1},8,["columns","rows"])])),_:1})])),_:1},8,["modelValue"])])])])])),_:1})}var y=o(6430),_=o(5616),k=o(2841),C=o(7428);const E={name:"ReportTable",components:{},data(){return{header_data:null,title:"Report",IgnoredColumns:["Total-Expence","NET-Profit"],Rshow:!1,Rtitle:"",Rrows:[],Rcolumns:[],dateRange:null,reportMethods:["FIFO","Average"],option:"FIFO",report:{},rows:{},pagination:{page:1,rowsPerPage:0},columns:[{name:"Attribute",label:"Attribute",field:"Attribute",align:"left",required:!0},{name:"Value",label:"Value",field:"Value",align:"left",required:!0},{name:"More",label:"Detail",field:"More",align:"right",required:!0}]}},computed:{toogle_columns(){return this.columns.filter((e=>!0!==e.required))},printable_data(){var e={title:"Report",table_tittle:"Report",header_data:this.header_data,columns:this.columns.filter((e=>!["More"].includes(e.name))),rows:this.transformer(this.rows)};return JSON.stringify(e)}},methods:{columnsAndRowGenerator(e,t){var o=[];e.forEach((e=>{o.push({name:e,label:e,field:e,align:"left",required:!0,sortable:!0})}));var r=[];return t.forEach((t=>{var o={};for(let r in t)t.hasOwnProperty(r)&&e.includes(r)&&(o[r]=t[r]);r.push(o)})),{rows:r,cols:o}},functionMapper(e){switch(e){case"Total-Purchase":this.showPurchase();break;case"Total-Sales":this.showSales();break;case"Cost-Of-Sales":this.ItemReport();break;case"Gross-Profit":this.ItemReport();break;case"Rent-Expence":this.rentReport();break;case"Other-Expences":this.OEReport();break;case"Personal-Expences":this.PEReport();break;case"Bill-Expences":this.BillReport();break;case"Masatefiya-Expence":this.MasatefiyaReport();break;case"LoadingUnloading-Expence":this.LoadinReport();break;case"Sallary-Expence":this.SalaryReport();break;case"Transfer-Expence":this.TransferReport();break;case"Other-Incomes":this.IncomeReport();break;case"Bank-Deposit":this.BankTransactionReport();break;case"Bank-Withdrawal":this.BankTransactionReport();break;case"Purchases-CreditSettlement":this.PCSReport();break;case"Sales-CreditSettlement":this.SCSReport();break;default:}},showPurchase(){var e=this.columnsAndRowGenerator(["GRNNO","PurchsedDate","Total"],this.report.GRN);this.BindTable(e.cols,e.rows,"Purchases")},showSales(){var e=this.columnsAndRowGenerator(["REFNO","Date","Total"],this.report.Reference);this.BindTable(e.cols,e.rows,"Sales")},ItemReport(){var e=this.columnsAndRowGenerator(["ItemType","Begining-Inventory","Ending-Inventory","Total-Purchase","Revenue","COGS","Gross-Profit","Inventory-Turnover","GMROI","Sales-Through-Rate","DOI"],this.report.individual_report);this.BindTable(e.cols,e.rows,"Item Reports")},rentReport(){var e=this.columnsAndRowGenerator(["RentID","RentType","Date","Payment"],this.report.Rent);this.BindTable(e.cols,e.rows,"Rent Expences")},OEReport(){var e=this.columnsAndRowGenerator(["OEID","OEType","OEDescription","TotalCost"],this.report.Other_Expence);this.BindTable(e.cols,e.rows,"Other Expences")},PEReport(){var e=this.columnsAndRowGenerator(["PEID","PEType","PEDescription","TotalCost"],this.report.Personal_Expence);this.BindTable(e.cols,e.rows,"Personal Expences")},BillReport(){var e=this.columnsAndRowGenerator(["BID","BILLType","BillDescription","TotalCost"],this.report.Bills_Expence);this.BindTable(e.cols,e.rows,"Bill Expences")},MasatefiyaReport(){var e=this.columnsAndRowGenerator(["MID","REFNO","Date","Cost"],this.report.Masatefiya);this.BindTable(e.cols,e.rows,"Masatefiya Expences")},LoadinReport(){var e=this.columnsAndRowGenerator(["Date","Cost","GRNNO"],this.report.LoadingUnloading_Expence);this.BindTable(e.cols,e.rows,"Loading/Unloading Expences")},SalaryReport(){var e=this.columnsAndRowGenerator(["SalaryID","Date","Cost","EmployeeID"],this.report.Salary_Expence);this.BindTable(e.cols,e.rows,"Salary Expences")},TransferReport(){var e=this.columnsAndRowGenerator(["TEID","Date","Cost"],this.report.Transfer_Expence);this.BindTable(e.cols,e.rows,"Transfer Expences")},IncomeReport(){var e=this.columnsAndRowGenerator(["IncomeID","Description","Amount","Date"],this.report.Incomes);this.BindTable(e.cols,e.rows,"Incomes")},BankTransactionReport(){var e=this.columnsAndRowGenerator(["PBID","AccountNumber","BankName","TotalDeposit","TotalWithdrawal"],this.report.Bank_Transaction);this.BindTable(e.cols,e.rows,"Bank Transactions")},PCSReport(){var e=this.columnsAndRowGenerator(["GRNNO","PurchsedDate","SupplierName","DriverName","Remainder","Paid","Total"],this.report.GRN_CreditSettlement);this.BindTable(e.cols,e.rows,"Purchase Credit Settlement")},SCSReport(){var e=this.columnsAndRowGenerator(["REFNO","SalesDate","CustomerName","DriverName","Remainder","Paid","Total"],this.report.REF_CreditSettlement);this.BindTable(e.cols,e.rows,"Purchase Credit Settlement")},BindTable(e,t,o){this.Rcolumns=e,this.Rrows=t,this.Rtitle=o,this.Rshow=!0},transformer(e){return Object.keys(e).length>0?Object.keys(e).map((t=>({Attribute:t,Value:e[t]}))):[]},myRule(e){if(null===e)return"Empty Feild!!"},onReset(){this.dateRange=null,this.option=null},toogleRshow(e){this.Rshow=e},todayReport(){const e=Date.now(),t=_.ZP.formatDate(e,"YYYY/MM/DD");this.header_data={firstDate:t,lastDate:t};const o={date1:t,date2:t,option:this.option};(0,y.H)(o).then((e=>{this.report=e.data,this.rows=this.report.final_report})).catch((e=>{(0,C.j)(e.response.data.message,"negative","top")}))},onSubmit(){if(null==this.dateRange)(0,C.j)("Please select the Date first");else{this.header_data={firstDate:this.dateRange.from,lastDate:this.dateRange.to};const e={date1:this.dateRange.from,date2:this.dateRange.to,option:this.option};(0,y.H)(e).then((e=>{this.report=e.data,this.rows=this.report.final_report})).catch((e=>{(0,C.j)(e.response.data.message,"negative","top")}))}},wrapCsvValue(e,t){let o=void 0!==t?t(e):e;return o=void 0===o||null===o?"":String(o),o=o.split('"').join('""'),`"${o}"`},exportTablePopUP(){const e=[this.Rcolumns.map((e=>this.wrapCsvValue(e.label)))].concat(this.Rrows.map((e=>this.Rcolumns.map((t=>this.wrapCsvValue("function"===typeof t.field?t.field(e):e[void 0===t.field?t.name:t.field],t.format))).join(",")))).join("\r\n"),t=(0,k.Z)("table-export.csv",e,"text/csv");!0!==t&&(0,C.j)("Browser denied file download...")},exportTable(){const e=[this.columns.map((e=>this.wrapCsvValue(e.label)))].concat(this.transformer(this.rows).map((e=>this.columns.map((t=>this.wrapCsvValue("function"===typeof t.field?t.field(e):e[void 0===t.field?t.name:t.field],t.format))).join(",")))).join("\r\n"),t=(0,k.Z)("table-export.csv",e,"text/csv");!0!==t&&(0,C.j)("Browser denied file download...")}}};var D=o(4379),x=o(2651),P=o(8516),B=o(2165),S=o(3243),q=o(2025),I=o(8186),A=o(3884),G=o(6778),O=o(151),W=o(5589),V=o(677),N=o(7518),j=o.n(N);E.render=T;const M=E;j()(E,"components",{QPage:D.Z,QDate:x.Z,QSelect:P.Z,QBtn:B.Z,QTable:S.Z,QSpace:q.Z,QTr:I.Z,QTd:A.Z,QDialog:G.Z,QCard:O.Z,QCardSection:W.Z}),j()(E,"directives",{ClosePopup:V.Z})}}]);