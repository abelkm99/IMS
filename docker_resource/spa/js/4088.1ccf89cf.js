"use strict";(self["webpackChunkims"]=self["webpackChunkims"]||[]).push([[4088],{4088:(e,a,l)=>{l.r(a),l.d(a,{default:()=>U});var o=l(3673),t=l(2323);const s={class:"q-pa-md"},n={class:"q-pa-xl"},r={class:"row q-gutter-md"},i={class:"row items-center justify-end"},d={class:"row items-center justify-end"},c={class:"col-2 q-table__title"},p={key:0,class:"col"},u={class:"q-gutter-md"};function m(e,a,l,m,g,h){const w=(0,o.up)("DeleteDialogBox"),_=(0,o.up)("q-btn"),f=(0,o.up)("q-date"),D=(0,o.up)("q-popup-proxy"),b=(0,o.up)("q-icon"),k=(0,o.up)("q-input"),y=(0,o.up)("q-select"),q=(0,o.up)("q-space"),v=(0,o.up)("q-toggle"),W=(0,o.up)("q-item"),x=(0,o.up)("q-td"),P=(0,o.up)("q-tr"),C=(0,o.up)("q-table"),V=(0,o.up)("q-page"),R=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.j4)(V,{padding:""},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{onResponse:h.getResponse,ref:"confirmbox"},null,8,["onResponse"]),(0,o._)("div",s,[(0,o._)("div",n,[(0,o.Wm)(C,{title:g.title,rows:g.rows,columns:g.columns,"row-key":"CustomerTable","visible-columns":g.visibleColumns,loading:g.loading,color:"secondary",pagination:g.pagination,"onUpdate:pagination":a[8]||(a[8]=e=>g.pagination=e),onRequest:h.handleRequest,"rows-per-page-options":[5,10,15,20,25,30]},{"top-right":(0,o.w5)((()=>[(0,o._)("div",r,[(0,o.Wm)(k,{color:"secondary",style:{width:"150px"},label:"Date",filled:"",modelValue:g.search_data.D1,"onUpdate:modelValue":a[1]||(a[1]=e=>g.search_data.D1=e)},{prepend:(0,o.w5)((()=>[(0,o.Wm)(b,{name:"event",class:"cursor-pointer"},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{"transition-show":"scale","transition-hide":"scale"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{color:"secondary",modelValue:g.search_data.D1,"onUpdate:modelValue":a[0]||(a[0]=e=>g.search_data.D1=e),mask:"YYYY-MM-DD"},{default:(0,o.w5)((()=>[(0,o._)("div",i,[(0,o.wy)((0,o.Wm)(_,{label:"Close",color:"secondary",flat:""},null,512),[[R]])])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(k,{color:"secondary",style:{width:"150px"},label:"Date",filled:"",modelValue:g.search_data.D2,"onUpdate:modelValue":a[3]||(a[3]=e=>g.search_data.D2=e)},{prepend:(0,o.w5)((()=>[(0,o.Wm)(b,{name:"event",class:"cursor-pointer"},{default:(0,o.w5)((()=>[(0,o.Wm)(D,{"transition-show":"scale","transition-hide":"scale"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{color:"secondary",modelValue:g.search_data.D2,"onUpdate:modelValue":a[2]||(a[2]=e=>g.search_data.D2=e),mask:"YYYY-MM-DD"},{default:(0,o.w5)((()=>[(0,o._)("div",d,[(0,o.wy)((0,o.Wm)(_,{label:"Close",color:"secondary",flat:""},null,512),[[R]])])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(y,{color:"secondary",style:{width:"150px"},modelValue:g.search_data.order,"onUpdate:modelValue":a[4]||(a[4]=e=>g.search_data.order=e),options:["Ascending ","Descending "],label:"Order Type",filled:""},null,8,["modelValue"]),(0,o.Wm)(_,{label:"Search",color:"secondary","icon-right":"search","no-caps":"",flat:"",dense:"",onClick:a[5]||(a[5]=e=>h.search())}),(0,o.Wm)(_,{label:"Reset",color:"negative","no-caps":"",flat:"",dense:"",onClick:a[6]||(a[6]=e=>h.reset())})])])),"top-left":(0,o.w5)((l=>[(0,o._)("div",c,(0,t.zw)(g.title),1),(0,o.Wm)(q),e.$q.screen.gt.xs?((0,o.wg)(),(0,o.iD)("div",p,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(h.toogle_columns,(e=>((0,o.wg)(),(0,o.j4)(W,{style:{display:"inline"},key:e},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{modelValue:g.visibleColumns,"onUpdate:modelValue":a[7]||(a[7]=e=>g.visibleColumns=e),val:e.name,label:e.label,color:"secondary"},null,8,["modelValue","val","label"])])),_:2},1024)))),128)),(0,o._)("div",u,[(0,o.Wm)(_,{flat:"",round:"",dense:"",icon:l.inFullscreen?"fullscreen_exit":"fullscreen",onClick:l.toggleFullscreen,class:"q-ml-md"},null,8,["icon","onClick"]),(0,o.Wm)(_,{color:"secondary",onClick:h.newBackup,icon:"backup",label:"New Backup"},null,8,["onClick"])])])):(0,o.kq)("",!0)])),body:(0,o.w5)((e=>[(0,o.Wm)(P,{props:e},{default:(0,o.w5)((()=>[(0,o.Wm)(x,{key:"ID",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,t.zw)(e.row.ID),1)])),_:2},1032,["props"]),(0,o.Wm)(x,{key:"FilePath",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,t.zw)(e.row.FilePath),1)])),_:2},1032,["props"]),(0,o.Wm)(x,{key:"Date",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,t.zw)(e.row.Date),1)])),_:2},1032,["props"]),(0,o.Wm)(x,{key:"Restore",props:e},{default:(0,o.w5)((()=>[(0,o.Wm)(_,{color:"secondary",icon:"restore",flat:"",label:"restore",onClick:a=>h.restoreBackup(e.row.ID)},null,8,["onClick"])])),_:2},1032,["props"]),(0,o.Wm)(x,{key:"Delete",props:e},{default:(0,o.w5)((()=>[(0,o.Wm)(_,{color:"negative","icon-right":"delete","no-caps":"",flat:"",dense:"",onClick:a=>h.show_dialog_box(g.rows.indexOf(e.row))},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["title","rows","columns","visible-columns","loading","pagination","onRequest"])])])])),_:1})}var g=l(6966),h=l(7428),w=l(8264);const _={name:"Backup",components:{DeleteDialogBox:g.Z},data(){return{pagination:{descending:!1,page:1,rowsPerPage:10},loading:!0,title:"Backups",visibleColumns:["ID","Date"],columns:[{name:"ID",label:"ID",field:"ID",align:"left",required:!0},{name:"FilePath",label:"File Path",field:"FilePath",align:"center"},{name:"Date",label:"Date",field:"Date",align:"center",required:!0},{name:"Restore",label:"Restore",field:"Restore",align:"center",required:!0},{name:"Delete",label:"Delete",field:"Delete",align:"right",required:!0}],rows:[],selected_index:null,search_data:{page:1,RPP:10,D1:null,D2:null,order:"Descending"}}},computed:{toogle_columns(){return this.columns.filter((e=>!0!==e.required))}},methods:{restoreBackup(e){const a={ID:e};(0,w.P7)(a).then((e=>{(0,h.U)(e.data.message,"positive","top",5e3,"restore")})).catch((e=>{console.log(e),(0,h.j)(e.response.data.message,"negative","top")}))},newBackup(){(0,w.JB)().then((e=>{(0,h.U)(e.data.message,"positive","top",5e3,"backup"),this.reset()})).catch((e=>{(0,h.j)(e.response.data.message,"negative","top")}))},handleRequest(e){this.fetch_rows(e.pagination.page,e.pagination.rowsPerPage)},request_data_builder(e,a){var l=this.search_data;return l.page=e,l.RPP=a,l},reset(){this.search_data={page:1,RPP:10,D1:null,D2:null,order:"Descending"},this.fetch_rows(1)},search(){this.fetch_rows(1)},fetch_rows(e,a){(0,w.qL)(this.request_data_builder(e,a)).then((e=>{const a=e.data.meta_data;this.pagination.page=a.current_page,this.pagination.rowsPerPage=a.per_page,this.pagination.rowsNumber=a.total,this.rows=e.data.data,this.loading=!1})).catch((e=>{this.rows=e.response.data.data,this.loading=!1}))},getResponse(e){if(e){const e={ID:this.rows[this.selected_index].ID};(0,w.ry)(e).then((e=>{(0,h.U)(e.data.message,"positive","top"),this.rows.splice(this.selected_index,1),this.selected_index=null,this.$refs.confirmbox.response=!1})).catch((e=>{(0,h.j)(e.response.data.message,"negative","top")}))}},show_dialog_box(e){this.$refs.confirmbox.message=`${this.rows[e].Date} Backup Data`,this.$refs.confirmbox.confirm=!0,this.selected_index=e}},mounted(){this.fetch_rows(1)}};var f=l(4379),D=l(3243),b=l(4842),k=l(4554),y=l(3944),q=l(2651),v=l(2165),W=l(8516),x=l(2025),P=l(3414),C=l(8886),V=l(8186),R=l(3884),Z=l(677),Q=l(7518),I=l.n(Q);_.render=m;const U=_;I()(_,"components",{QPage:f.Z,QTable:D.Z,QInput:b.Z,QIcon:k.Z,QPopupProxy:y.Z,QDate:q.Z,QBtn:v.Z,QSelect:W.Z,QSpace:x.Z,QItem:P.Z,QToggle:C.Z,QTr:V.Z,QTd:R.Z}),I()(_,"directives",{ClosePopup:Z.Z})}}]);