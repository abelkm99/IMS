"use strict";(self["webpackChunkims"]=self["webpackChunkims"]||[]).push([[2926],{2926:(e,t,l)=>{l.r(t),l.d(t,{default:()=>X});var s=l(3673);function i(e,t,l,i,o,a){const n=(0,s.up)("SalesHeader"),r=(0,s.up)("MakeSales"),m=(0,s.up)("q-page");return(0,s.wg)(),(0,s.j4)(m,{padding:""},{default:(0,s.w5)((()=>[(0,s.Wm)(n,{Employee:!0}),(0,s.Wm)(r,{Employee:!0})])),_:1})}var o=l(7302),a=l(8880),n=l(2323);const r={class:"q-pt-xl"},m={class:"q-pt-xl row"},u={class:"q-pa-md col-7"},c={class:"q-gutter-md row"},d={class:"row items-center justify-end"},p={class:"row items-center justify-end"},h={class:"q-gutter-md row"},y={class:"row q-gutter-md q-pt-xl"},f={class:"row q-gutter-md q-pt-xl"},_={class:"q-pa-md col-5"},w={class:"q-pa-md row"},v={class:"row q-pa-md"},S={class:"q-pl-lg"},I=(0,s.Uk)("Total : "),g={class:"text-secondary"},D={class:"q-gutter-md"};function b(e,t,l,i,o,b){const T=(0,s.up)("TrackItem"),W=(0,s.up)("q-btn"),Q=(0,s.up)("q-date"),q=(0,s.up)("q-popup-proxy"),P=(0,s.up)("q-icon"),Z=(0,s.up)("q-time"),k=(0,s.up)("q-input"),C=(0,s.up)("q-select"),V=(0,s.up)("Select"),x=(0,s.up)("select-optional"),$=(0,s.up)("q-form"),N=(0,s.up)("q-item-section"),E=(0,s.up)("q-item"),j=(0,s.up)("q-list"),U=(0,s.up)("q-btn-dropdown"),M=(0,s.up)("q-td"),O=(0,s.up)("q-table"),Y=(0,s.up)("q-scroll-area"),H=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(T,{parent_date:o.Sales_Date},null,8,["parent_date"]),(0,s._)("div",r,[(0,s._)("div",m,[(0,s._)("div",u,[(0,s.Wm)($,{onKeydown:(0,a.D2)((0,a.iM)(b.addItem,["prevent"]),["enter"]),onSubmit:(0,a.iM)(b.onSubmit,["prevent"]),onReset:b.onReset,class:"q-gutter-sm"},{default:(0,s.w5)((()=>[(0,s._)("div",c,[(0,s.Wm)(k,{style:{width:"250px"},color:"secondary",filled:"",modelValue:o.Sales_Date,"onUpdate:modelValue":t[2]||(t[2]=e=>o.Sales_Date=e)},{prepend:(0,s.w5)((()=>[(0,s.Wm)(P,{name:"event",class:"cursor-pointer"},{default:(0,s.w5)((()=>[(0,s.Wm)(q,{"transition-show":"scale","transition-hide":"scale"},{default:(0,s.w5)((()=>[(0,s.Wm)(Q,{color:"secondary",modelValue:o.Sales_Date,"onUpdate:modelValue":t[0]||(t[0]=e=>o.Sales_Date=e),mask:"YYYY-MM-DD HH:mm"},{default:(0,s.w5)((()=>[(0,s._)("div",d,[(0,s.wy)((0,s.Wm)(W,{label:"Close",color:"secondary",flat:""},null,512),[[H]])])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),append:(0,s.w5)((()=>[(0,s.Wm)(P,{name:"access_time",class:"cursor-pointer"},{default:(0,s.w5)((()=>[(0,s.Wm)(q,{"transition-show":"scale","transition-hide":"scale"},{default:(0,s.w5)((()=>[(0,s.Wm)(Z,{color:"secondary",modelValue:o.Sales_Date,"onUpdate:modelValue":t[1]||(t[1]=e=>o.Sales_Date=e),mask:"YYYY-MM-DD HH:mm",format12h:""},{default:(0,s.w5)((()=>[(0,s._)("div",p,[(0,s.wy)((0,s.Wm)(W,{label:"Close",color:"primary",flat:""},null,512),[[H]])])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,s.Wm)(C,{color:"secondary",filled:"",modelValue:o.Transaction_Type,"onUpdate:modelValue":t[3]||(t[3]=e=>o.Transaction_Type=e),label:"transaction-type",options:["Cash","Credit"],style:{width:"250px"},behavior:"menu",rules:[b.myRule]},null,8,["modelValue","rules"]),(0,s.Wm)(V,{filter_key:"CustomerName",ref:"customerSelect",lable:"Customer",rows:o.customer_option,stringOptions:o.customer_option.map((e=>e.CustomerName))},null,8,["rows","stringOptions"])]),(0,s._)("div",h,[(0,s.Wm)(x,{filter_key:"DriverName",ref:"driverSelect",lable:"Driver",rows:o.driver_option,stringOptions:o.driver_option.map((e=>e.DriverName))},null,8,["rows","stringOptions"]),(0,s.Wm)(k,{color:"secondary",filled:"",type:"text",modelValue:o.Description,"onUpdate:modelValue":t[4]||(t[4]=e=>o.Description=e),label:"Description",style:{width:"250px"},behavior:"menu"},null,8,["modelValue"])]),(0,s._)("div",y,[(0,s.Wm)(x,{filter_key:"ItemType",ref:"itemSelect",lable:"Item Type",rows:o.items_option,stringOptions:o.items_option.map((e=>e.ItemType))},null,8,["rows","stringOptions"]),(0,s.Wm)(k,{color:"secondary",filled:"",modelValue:o.Quantity,"onUpdate:modelValue":t[5]||(t[5]=e=>o.Quantity=e),type:"number",min:"1",label:"Quantity",hint:"have to be greater than 0",style:{width:"175px"}},null,8,["modelValue"]),(0,s.Wm)(k,{style:{width:"175px"},color:"secondary",filled:"",modelValue:o.Price,"onUpdate:modelValue":t[6]||(t[6]=e=>o.Price=e),type:"number",min:"1",label:"Price",hint:"have to be greater than 0"},null,8,["modelValue"]),(0,s.Wm)(W,{onKeyup:(0,a.D2)(b.addItem,["enter"]),label:"Add Item",icon:"add",style:{height:"50px"},color:"secondary",onClick:t[7]||(t[7]=e=>b.addItem())},null,8,["onKeyup"])]),(0,s._)("div",f,[(0,s.Wm)(W,{label:"sell",icon:"sell",type:"submit",color:"secondary"}),(0,s.Wm)(W,{label:"Reset",type:"reset",color:"secondary",flat:"",class:"q-ml-sm"})])])),_:1},8,["onKeydown","onSubmit","onReset"])]),(0,s._)("div",_,[(0,s.Wm)(Y,{style:{width:"600px",height:"800px"}},{default:(0,s.w5)((()=>[(0,s._)("div",w,[(0,s.Wm)(O,{title:"Purchase Items",rows:o.rows,columns:o.columns,"row-key":"name",selection:"multiple",selected:o.selected,"onUpdate:selected":t[8]||(t[8]=e=>o.selected=e)},{"top-left":(0,s.w5)((()=>[(0,s._)("div",v,[(0,s._)("span",null,(0,n.zw)(o.title),1),(0,s._)("span",S,[I,(0,s._)("b",g,(0,n.zw)(b.totalPurchase)+" Birr",1)])])])),"top-right":(0,s.w5)((()=>[(0,s._)("div",D,[(0,s.Wm)(U,{flat:"",color:"secondary"},{default:(0,s.w5)((()=>[(0,s.Wm)(j,null,{default:(0,s.w5)((()=>[(0,s.wy)((0,s.Wm)(E,{clickable:""},{default:(0,s.w5)((()=>[(0,s.Wm)(N,null,{default:(0,s.w5)((()=>[(0,s.Wm)(W,{label:"save slip",flat:"",icon:"turned_in",color:"secondary",onClick:b.saveSlip},null,8,["onClick"]),(0,s.Wm)(W,{label:"load slip",flat:"",icon:"download",color:"secondary",onClick:b.loadSlip},null,8,["onClick"])])),_:1})])),_:1},512),[[H]])])),_:1})])),_:1}),(0,s.Wm)(W,{color:"negative","icon-right":"delete_forever","no-caps":"",onClick:b.deleteSelected},null,8,["onClick"])])])),"body-cell-action":(0,s.w5)((e=>[(0,s.Wm)(M,{props:e},{default:(0,s.w5)((()=>[(0,s.Wm)(W,{color:"negative","icon-right":"delete","no-caps":"",flat:"",dense:"",onClick:t=>b.deleteval(o.rows.indexOf(e.row))},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","selected"])])])),_:1})])])])],64)}var T=l(589),W=l(2986),Q=l(7428),q=l(807),P=l(8944),Z=l(4664);const k={name:"MakeSales",components:{Select:q.Z,SelectOptional:P.Z,TrackItem:Z.Z},props:{Employee:{Type:Boolean,default:!1}},data(){return{selected_item:"",items_option:[],transaction_option:[],customer_option:[],driver_option:[],Quantity:"",Price:"",model:null,Sales_Date:null,Transaction_Type:null,CustomerName:null,DriverName:null,Description:null,SalesString:"",rows:[],columns:[{name:"ItemType",label:"ItemType",field:"ItemType",align:"left"},{name:"Price",label:"Price",field:"Price",sortable:!0},{name:"Quantity",label:"Quantity",field:"Quantity"},{name:"Total",label:"Total",field:"Total",sortable:!0},{name:"action",label:"Action",field:"action"}],title:"Purchase Items",selected:[]}},methods:{focustItemType(){this.$refs.itemSelect.$el.focus()},saveSlip(){this.rows.length>0?T.Z.set("slip1",this.rows):(0,Q.j)("No Items are on the table")},loadSlip(){var e=T.Z.getItem("slip1")||[];this.rows=[],this.rows=e},myRule(e){if(null===e)return"Empty Feild!!"},addItem(){if(null==this.$refs.itemSelect.value||""==this.$refs.itemSelect.value)(0,Q.j)("Item Type Feild can't be empty!"),this.focustItemType();else if(this.added_before())if(this.Quantity<1||null==this.Quantity)(0,Q.j)("Please Enter a valid Number for Quantity");else if(this.Price<1||null==this.Price)(0,Q.j)("Please Enter a valid Number for Price");else{var e={ItemType:this.$refs.itemSelect.value,Quantity:this.Quantity,Price:this.Price,Total:this.Quantity*this.Price};this.rows.push(e),this.$refs.itemSelect.value=null,this.Quantity=null,this.Price=null,this.focustItemType()}else this.focustItemType(),(0,Q.j)(`item type ${this.$refs.itemSelect.value} is already added to the Sales list`)},added_before(){return void 0==this.rows.find((e=>e.ItemType===this.$refs.itemSelect.value))},onSubmit(){if(null==this.Sales_Date)(0,Q.j)("Please Fill The Purchased Date");else if(this.SalesString=this.getSalesString(),null==this.SalesString)(0,Q.j)("No Purchase Item is listed");else{const e={Date:this.Sales_Date,CustomerID:this.customer_option.find((e=>e.CustomerName===this.$refs.customerSelect.value)).CustomerID,TransactionID:"Cash"==this.Transaction_Type?1:2,EmployeeID:T.Z.getItem("EmployeeID"),DriverID:null!=this.DriverName?this.driver_option.find((e=>e.DriverName===this.$refs.driverSelect.value)).DriverID:"",SalesInformation:this.getSalesString(),Description:this.Description};(0,W.J3)(e).then((e=>{(0,Q.U)(e.data.message,"positive","top"),this.$router.push({name:"Esales"})})).catch((e=>{(0,Q.j)(e.response.data.message,"negative","top")}))}},onReset(){this.$refs.itemSelect.value=null,this.$refs.customerSelect.value=null,this.$refs.driverSelect.value=null,this.$refs.employeeSelect.value=null,this.Transaction_Type=null,this.Sales_Date=null,this.Description=null,this.Quantity=null,this.Price=null,this.rows=[]},getItemID(e){return this.items_option.find((t=>t.ItemType===e)).ItemID},getSalesString(){var e="";return this.rows.forEach((t=>{e+=this.getItemID(t.ItemType)+","+t.Price+","+t.Quantity+";"})),e.length>0?e:null},deleteSelected(){let e=this;this.selected.filter((function(t){return e.rows.splice(e.rows.indexOf(t),1),t})),this.selected=[]},deleteval(e){this.rows.splice(e,1)}},computed:{totalPurchase(){var e=0;return this.rows.forEach((t=>{e+=parseInt(t.Total)})),e}},mounted(){this.items_option=T.Z.getItem("Items"),this.customer_option=T.Z.getItem("Customers"),this.employee_option=T.Z.getItem("Employees"),this.driver_option=T.Z.getItem("Drivers"),this.focustItemType()}};var C=l(5269),V=l(4842),x=l(4554),$=l(3944),N=l(2651),E=l(2165),j=l(5990),U=l(8516),M=l(7704),O=l(3243),Y=l(2226),H=l(1046),R=l(3414),A=l(2035),B=l(3884),F=l(677),K=l(7518),z=l.n(K);k.render=b;const J=k;z()(k,"components",{QForm:C.Z,QInput:V.Z,QIcon:x.Z,QPopupProxy:$.Z,QDate:N.Z,QBtn:E.Z,QTime:j.Z,QSelect:U.Z,QScrollArea:M.Z,QTable:O.Z,QBtnDropdown:Y.Z,QList:H.Z,QItem:R.Z,QItemSection:A.Z,QTd:B.Z}),z()(k,"directives",{ClosePopup:F.Z});const L={name:"AddSales",components:{SalesHeader:o.Z,MakeSales:J}};var G=l(4379);L.render=i;const X=L;z()(L,"components",{QPage:G.Z})}}]);