"use strict";(self["webpackChunkims"]=self["webpackChunkims"]||[]).push([[8920],{8920:(e,t,l)=>{l.r(t),l.d(t,{default:()=>U});var s=l(3673),a=l(2323);const i={class:"q-pa-md"},o={class:"q-gutter-md row"},n={class:"column q-pa-md justify-evenly"},r={class:"row q-gutter-md q-pt-md"},d={style:{"max-width":"300px"}},m={class:"row items-center justify-end"},u={class:"row items-center justify-end"},c={class:"row q-gutter-md q-pt-md"},p={class:"row q-gutter-md q-pt-md"},h={class:"q-pa-md row justify-center"},f={class:"q-pa-md"},y={class:"row q-pa-md"};function _(e,t,l,_,v,w){const b=(0,s.up)("TransferHeader"),T=(0,s.up)("q-btn"),D=(0,s.up)("q-date"),I=(0,s.up)("q-popup-proxy"),Q=(0,s.up)("q-icon"),g=(0,s.up)("q-time"),q=(0,s.up)("q-input"),W=(0,s.up)("q-select"),V=(0,s.up)("q-form"),j=(0,s.up)("q-td"),P=(0,s.up)("q-table"),C=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(b,{Employee:!0}),(0,s._)("div",i,[(0,s.Wm)(V,{onSubmit:w.onSubmit,onReset:w.onReset,class:"q-gutter-md"},{default:(0,s.w5)((()=>[(0,s._)("div",o,[(0,s._)("div",n,[(0,s._)("div",r,[(0,s._)("div",d,[(0,s.Wm)(q,{color:"secondary",filled:"",modelValue:v.Transfer_Date,"onUpdate:modelValue":t[2]||(t[2]=e=>v.Transfer_Date=e)},{prepend:(0,s.w5)((()=>[(0,s.Wm)(Q,{name:"event",class:"cursor-pointer"},{default:(0,s.w5)((()=>[(0,s.Wm)(I,{"transition-show":"scale","transition-hide":"scale"},{default:(0,s.w5)((()=>[(0,s.Wm)(D,{color:"secondary",modelValue:v.Transfer_Date,"onUpdate:modelValue":t[0]||(t[0]=e=>v.Transfer_Date=e),mask:"YYYY-MM-DD HH:mm"},{default:(0,s.w5)((()=>[(0,s._)("div",m,[(0,s.wy)((0,s.Wm)(T,{label:"Close",color:"secondary",flat:""},null,512),[[C]])])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),append:(0,s.w5)((()=>[(0,s.Wm)(Q,{name:"access_time",class:"cursor-pointer"},{default:(0,s.w5)((()=>[(0,s.Wm)(I,{"transition-show":"scale","transition-hide":"scale"},{default:(0,s.w5)((()=>[(0,s.Wm)(g,{color:"secondary",modelValue:v.Transfer_Date,"onUpdate:modelValue":t[1]||(t[1]=e=>v.Transfer_Date=e),mask:"YYYY-MM-DD HH:mm",format12h:""},{default:(0,s.w5)((()=>[(0,s._)("div",u,[(0,s.wy)((0,s.Wm)(T,{label:"Close",color:"primary",flat:""},null,512),[[C]])])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"])]),(0,s.Wm)(W,{color:"secondary",filled:"",modelValue:v.DriverName,"onUpdate:modelValue":t[3]||(t[3]=e=>v.DriverName=e),label:"Driver",options:v.driver_option.map((e=>e.DriverName)),style:{width:"250px"},behavior:"menu"},null,8,["modelValue","options"]),(0,s.Wm)(q,{color:"secondary",filled:"",modelValue:v.cost,"onUpdate:modelValue":t[4]||(t[4]=e=>v.cost=e),type:"number",min:"0",label:"Cost",hint:"have to be greater than 0"},null,8,["modelValue"])]),(0,s._)("div",c,[(0,s.Wm)(W,{color:"secondary",filled:"",modelValue:v.selected_item,"onUpdate:modelValue":t[5]||(t[5]=e=>v.selected_item=e),label:"Item Type",options:v.items_option.map((e=>e.ItemType)),style:{width:"250px"},behavior:"menu"},null,8,["modelValue","options"]),(0,s.Wm)(q,{color:"secondary",filled:"",modelValue:v.Quantity,"onUpdate:modelValue":t[6]||(t[6]=e=>v.Quantity=e),type:"number",min:"1",label:"Quantity",hint:"have to be greater than 0"},null,8,["modelValue"])]),(0,s._)("div",p,[(0,s.Wm)(T,{label:"Add Item",color:"secondary",onClick:t[7]||(t[7]=e=>w.addItem())}),(0,s.Wm)(T,{label:"Submit",type:"submit",color:"secondary"}),(0,s.Wm)(T,{label:"Reset",type:"reset",color:"secondary",flat:"",class:"q-ml-sm"})])])])])),_:1},8,["onSubmit","onReset"]),(0,s._)("div",h,[(0,s._)("div",f,[(0,s.Wm)(P,{title:"Purchase Items",rows:v.rows,columns:v.columns,"row-key":"name",selection:"multiple",selected:v.selected,"onUpdate:selected":t[8]||(t[8]=e=>v.selected=e)},{"top-left":(0,s.w5)((()=>[(0,s._)("div",y,[(0,s._)("span",null,(0,a.zw)(v.title),1)])])),"top-right":(0,s.w5)((()=>[(0,s.Wm)(T,{color:"negative","icon-right":"delete_forever","no-caps":"",onClick:w.deleteSelected},null,8,["onClick"])])),"body-cell-action":(0,s.w5)((e=>[(0,s.Wm)(j,{props:e},{default:(0,s.w5)((()=>[(0,s.Wm)(T,{color:"negative","icon-right":"delete","no-caps":"",flat:"",dense:"",onClick:t=>w.deleteval(v.rows.indexOf(e.row))},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","selected"])])])])],64)}var v=l(5100),w=l(4122),b=l(8554),T=l(3114),D=l(7428);const I={name:"TransferToshop",components:{TransferHeader:v.Z},data(){return{selected_item:"",items_option:[],transaction_option:[],supplier_option:[],driver_option:[],Quantity:"",Price:"",model:null,Transfer_Date:null,Transaction_Type:null,SupplierName:null,DriverName:null,cost:null,PurchaseString:"",rows:[],columns:[{name:"ItemType",label:"ItemType",field:"ItemType",align:"left",sortable:!0},{name:"Quantity",label:"Quantity",field:"Quantity",sortable:!0},{name:"action",label:"Action",field:"action"}],title:"Purchase Items",selected:[]}},methods:{myRule(e){if(null===e)return"Empty Feild!!"},addItem(){if(null==this.selected_item||""==this.selected_item)(0,D.j)("Item Type Feild can't be empty!");else if(this.added_before())if(this.Quantity<1||null==this.Quantity)(0,D.j)("Please Enter a valid Number for Quantity");else{var e={ItemType:this.selected_item,Quantity:this.Quantity};this.rows.push(e),this.Quantity=null,this.selected_item=null}else(0,D.j)(`item type ${this.selected_item} is already added to the purchase list`)},added_before(){return void 0==this.rows.find((e=>e.ItemType===this.selected_item))},get_item_ID(e){return this.find((t=>t.ItemType===e)).ItemID},onSubmit(){if(null==this.Transfer_Date)(0,D.j)("Please Fill The Purchased Date");else if(null==this.cost)(0,D.j)("Please Fill The Cost");else if(this.rows.length<1)(0,D.j)("Empty Item List");else{const e={Cost:this.cost,DriverId:null!=this.DriverName?this.driver_option.find((e=>e.DriverName===this.DriverName)).DriverID:"",json:this.json_builder(),Date:this.Transfer_Date};(0,T.b)(e).then((e=>{(0,D.U)(e.data.message,"positive","top"),this.$router.push({name:"Etransfer-expenses"})})).catch((e=>{(0,D.j)(e.response.data.message,"negative","top")}))}},json_builder(){var e={};return this.rows.forEach((t=>{var l=this.items_option.find((e=>e.ItemType===t.ItemType)).ItemID;e[l]=t.Quantity})),e},onReset(){this.selected_item=null,this.Transaction_Type=null,this.Transfer_Date=null,this.supplier_option=null,this.DriverName=null,this.Quantity=null,this.Price=null,this.rows=[],this.cost=null},getItemID(e){return this.items_option.find((t=>t.ItemType===e)).ItemID},getPurchaseString(){var e="";return this.rows.forEach((t=>{e+=this.getItemID(t.ItemType)+","+t.Price+","+t.Quantity+";"})),e.length>0?e:null},deleteSelected(){let e=this;this.selected.filter((function(t){return e.rows.splice(e.rows.indexOf(t),1),t})),this.selected=[]},deleteval(e){this.rows.splice(e,1)}},mounted(){(0,w.GR)().then((e=>{this.items_option=e.data})).catch((e=>{})),(0,b.jT)().then((e=>{this.driver_option=e.data})).catch((e=>{}))}};var Q=l(5269),g=l(4842),q=l(4554),W=l(3944),V=l(2651),j=l(2165),P=l(5990),C=l(8516),k=l(3243),Z=l(3884),S=l(677),N=l(7518),x=l.n(N);I.render=_;const U=I;x()(I,"components",{QForm:Q.Z,QInput:g.Z,QIcon:q.Z,QPopupProxy:W.Z,QDate:V.Z,QBtn:j.Z,QTime:P.Z,QSelect:C.Z,QTable:k.Z,QTd:Z.Z}),x()(I,"directives",{ClosePopup:S.Z})}}]);