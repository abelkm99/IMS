"use strict";(self["webpackChunkims"]=self["webpackChunkims"]||[]).push([[5044],{5044:(e,l,a)=>{a.r(l),a.d(l,{default:()=>G});var t=a(3673),s=a(2323);const o={class:"q-pa-xl"},r={class:"q-pa-md"},n={class:"row q-gutter-md q-pa-md"},i={class:"q-pl-sm"},d={class:"row"},u={style:{"max-width":"300px"}},m={class:"row items-center justify-end"},p={class:"row items-center justify-end"},c={class:"col-2 q-table__title"},h={key:0,class:"col"};function w(e,l,a,w,y,_){const v=(0,t.up)("PurchaseHeader"),f=(0,t.up)("q-item"),b=(0,t.up)("q-btn"),D=(0,t.up)("q-date"),P=(0,t.up)("q-popup-proxy"),g=(0,t.up)("q-icon"),k=(0,t.up)("q-time"),W=(0,t.up)("q-input"),R=(0,t.up)("q-space"),q=(0,t.up)("q-select"),I=(0,t.up)("q-td"),V=(0,t.up)("q-tr"),Q=(0,t.up)("q-table"),T=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("div",o,[(0,t.Wm)(v,{Employee:!0})]),(0,t._)("div",r,[(0,t._)("div",n,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(y.GRN,((e,l)=>((0,t.wg)(),(0,t.j4)(f,{key:l},{default:(0,t.w5)((()=>[(0,t.Uk)((0,s.zw)(l)+": ",1),(0,t._)("span",i,[(0,t._)("b",null,(0,s.zw)(e),1)])])),_:2},1024)))),128))]),(0,t._)("div",d,[(0,t._)("div",u,[(0,t.Wm)(W,{color:"secondary",filled:"",modelValue:y.Delivered_Date,"onUpdate:modelValue":l[2]||(l[2]=e=>y.Delivered_Date=e)},{prepend:(0,t.w5)((()=>[(0,t.Wm)(g,{name:"event",class:"cursor-pointer"},{default:(0,t.w5)((()=>[(0,t.Wm)(P,{"transition-show":"scale","transition-hide":"scale"},{default:(0,t.w5)((()=>[(0,t.Wm)(D,{color:"secondary",modelValue:y.Delivered_Date,"onUpdate:modelValue":l[0]||(l[0]=e=>y.Delivered_Date=e),mask:"YYYY-MM-DD HH:mm"},{default:(0,t.w5)((()=>[(0,t._)("div",m,[(0,t.wy)((0,t.Wm)(b,{label:"Close",color:"secondary",flat:""},null,512),[[T]])])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),append:(0,t.w5)((()=>[(0,t.Wm)(g,{name:"access_time",class:"cursor-pointer"},{default:(0,t.w5)((()=>[(0,t.Wm)(P,{"transition-show":"scale","transition-hide":"scale"},{default:(0,t.w5)((()=>[(0,t.Wm)(k,{modelValue:y.Delivered_Date,"onUpdate:modelValue":l[1]||(l[1]=e=>y.Delivered_Date=e),mask:"YYYY-MM-DD HH:mm",format12h:""},{default:(0,t.w5)((()=>[(0,t._)("div",p,[(0,t.wy)((0,t.Wm)(b,{label:"Close",color:"primary",flat:""},null,512),[[T]])])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])]),(0,t.Wm)(Q,{title:y.title,rows:y.rows,columns:y.columns,"row-key":"name","visible-columns":y.visibleColumns,loading:y.loading,color:"secondary","no-data-label":"There is No Purchase Under this GRN"},{bottom:(0,t.w5)((()=>[(0,t._)("div",null,[(0,t.Wm)(b,{label:"Ship",color:"positive","icon-right":"local_shipping","no-caps":"",dense:"",onClick:l[3]||(l[3]=e=>_.ship_Purchase())})])])),top:(0,t.w5)((a=>[(0,t._)("div",c,(0,s.zw)(y.title),1),(0,t.Wm)(R),e.$q.screen.gt.xs?((0,t.wg)(),(0,t.iD)("div",h)):((0,t.wg)(),(0,t.j4)(q,{key:1,color:"secondary",modelValue:y.visibleColumns,"onUpdate:modelValue":l[4]||(l[4]=e=>y.visibleColumns=e),multiple:"",borderless:"",dense:"","options-dense":"","display-value":e.$q.lang.table.columns,"emit-value":"","map-options":"",options:y.columns,"option-value":"name",style:{"min-width":"150px"}},null,8,["modelValue","display-value","options"])),(0,t.Wm)(b,{flat:"",round:"",dense:"",icon:a.inFullscreen?"fullscreen_exit":"fullscreen",onClick:a.toggleFullscreen,class:"q-ml-md"},null,8,["icon","onClick"])])),body:(0,t.w5)((e=>[(0,t.Wm)(V,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(I,{key:"PurchaseID",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,s.zw)(e.row.PurchaseID),1)])),_:2},1032,["props"]),(0,t.Wm)(I,{key:"ItemType",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,s.zw)(e.row.ItemType),1)])),_:2},1032,["props"]),(0,t.Wm)(I,{key:"PPP",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,s.zw)(e.row.PPP),1)])),_:2},1032,["props"]),(0,t.Wm)(I,{key:"Quantity",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,s.zw)(e.row.Quantity),1)])),_:2},1032,["props"]),(0,t.Wm)(I,{key:"Total",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,s.zw)(e.row.Total),1)])),_:2},1032,["props"]),(0,t.Wm)(I,{key:"Remainder",props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(W,{color:"secondary",modelValue:e.row.Remainder,"onUpdate:modelValue":l=>e.row.Remainder=l,type:"number",label:""},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["props"]),(0,t.Wm)(I,{key:"Extra",props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(W,{color:"secondary",modelValue:e.row.Extra,"onUpdate:modelValue":l=>e.row.Extra=l,type:"number",label:""},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["title","rows","columns","visible-columns","loading"])])],64)}var y=a(4107),_=a(5547),v=a(3114),f=a(7428);const b={name:"ShipGrn",components:{PurchaseHeader:y.Z},data(){return{loading:!1,title:"Items Inventory",visibleColumns:["ItemType","PPP","Quantity","Total","Remainder","Extra"],columns:[{name:"PurchaseID",label:"Purchase ID",field:"PurchaseID",align:"left",sortable:!0,required:!0},{name:"ItemType",label:"Item Type",field:"ItemType",sortable:!0},{name:"PPP",label:"Price",field:"PPP",sortable:!0},{name:"Quantity",label:"Quantity",field:"Quantity",sortable:!0},{name:"Total",label:"Total",field:"Total",sortable:!0},{name:"Remainder",label:"Remainder",field:"Remainder",sortable:!0,align:"center"},{name:"Extra",label:"Extra",field:"Extra",sortable:!0,align:"center"}],rows:[],selected_index:null,GRN:{},Delivered_Date:null}},computed:{toogle_columns(){return this.columns.filter((e=>!0!==e.required))}},methods:{validate_GRN(){(0,_.pW)(this.$route.params.GRNNO).then((e=>{this.GRN=e.data,this.Delivered_Date=this.GRN.PurchsedDate,this.GRN.Delivered&&this.$router.push({name:"Epurchases"}),this.fetchRows()})).catch((e=>{this.$router.push({name:"Epurchases"})}))},fetchRows(){(0,_.g1)(this.$route.params.GRNNO).then((e=>{this.rows=e.data,this.loading=!1})).catch((e=>{this.loading=!1}))},ship_Purchase(){if(null==this.Delivered_Date)(0,f.j)("Please Enter the Delivery Date");else{var e="";this.rows.forEach((l=>{var a=parseInt(l.PurchaseID),t=parseInt(l.Remainder),s=parseInt(l.Extra);t<0?(0,f.j)(`Remainder can't be negative number for item ${ItemType}`):s<0?(0,f.j)(`Extra can't be negative number for item ${ItemType}`):(t>s?(t-=s,s=0):t<s?(s-=t,t=0):(t=0,s=0),e+=a+","+t+","+s+";")}));const l={DeliverdDate:this.Delivered_Date,GRNNO:this.GRN.GRNNO,ShipmentInfo:e};(0,v.Y)(l).then((e=>{(0,f.U)(e.data.message,"positive","top"),this.$router.push({name:"Epurchases"})})).catch((e=>{(0,f.j)(e.response.data.message,"negative","top")}))}}},mounted(){this.validate_GRN()}};var D=a(3414),P=a(4842),g=a(4554),k=a(3944),W=a(2651),R=a(2165),q=a(5990),I=a(3243),V=a(2025),Q=a(8516),T=a(8186),x=a(3884),N=a(677),U=a(7518),E=a.n(U);b.render=w;const G=b;E()(b,"components",{QItem:D.Z,QInput:P.Z,QIcon:g.Z,QPopupProxy:k.Z,QDate:W.Z,QBtn:R.Z,QTime:q.Z,QTable:I.Z,QSpace:V.Z,QSelect:Q.Z,QTr:T.Z,QTd:x.Z}),E()(b,"directives",{ClosePopup:N.Z})}}]);