"use strict";(self["webpackChunkims"]=self["webpackChunkims"]||[]).push([[2656],{2656:(e,t,a)=>{a.r(t),a.d(t,{default:()=>pe});var r=a(3673);const s={class:"column q-gutter-md items-center"},o={class:"col items-center"},l=(0,r.Uk)("FiFO"),n=(0,r.Uk)("First IN First OUT"),i=(0,r.Uk)("Average"),c=(0,r.Uk)("Average"),p=(0,r.Uk)(" 3 Days report "),u=(0,r.Uk)(" 1 Week report "),d=(0,r.Uk)(" 2 Weeks report "),m=(0,r.Uk)(" 1 Month report "),h=(0,r.Uk)(" 2 Months report "),f=(0,r.Uk)(" 3 Months report "),y=(0,r.Uk)(" 6 Months report "),w=(0,r.Uk)(" 9 Months report "),S=(0,r.Uk)(" 1 Year report "),g={class:"row items-center justify-end q-gutter-sm"},x={class:"q-pa-lg"},k={class:"col"},W={class:"row"},v={class:"col-6"},_={class:"col-6"},b={class:"row"},D={class:"col"},Z={class:"col"},C={class:"col"};function E(e,t,a,E,F,M){const P=(0,r.up)("q-item-label"),O=(0,r.up)("q-item-section"),T=(0,r.up)("q-item"),R=(0,r.up)("q-list"),U=(0,r.up)("q-btn-dropdown"),q=(0,r.up)("q-tooltip"),I=(0,r.up)("q-btn"),B=(0,r.up)("q-date"),Q=(0,r.up)("q-popup-proxy"),Y=(0,r.up)("q-btn-group"),L=(0,r.up)("Sparkle"),N=(0,r.up)("ExpenceChart"),X=(0,r.up)("q-page"),j=(0,r.Q2)("close-popup");return(0,r.wg)(),(0,r.j4)(X,{padding:""},{default:(0,r.w5)((()=>[(0,r._)("div",s,[(0,r._)("div",o,[(0,r.Wm)(Y,null,{default:(0,r.w5)((()=>[(0,r.Wm)(U,{"auto-close":"",rounded:"",color:"secondary",split:"",label:F.option},{default:(0,r.w5)((()=>[(0,r.Wm)(R,{padding:"",style:{width:"250px"}},{default:(0,r.w5)((()=>[(0,r.Wm)(T,{clickable:"",onClick:t[0]||(t[0]=e=>F.option="FIFO")},{default:(0,r.w5)((()=>[(0,r.Wm)(O,null,{default:(0,r.w5)((()=>[(0,r.Wm)(P,null,{default:(0,r.w5)((()=>[l])),_:1}),(0,r.Wm)(P,{caption:""},{default:(0,r.w5)((()=>[n])),_:1})])),_:1})])),_:1}),(0,r.Wm)(T,{clickable:"",onClick:t[1]||(t[1]=e=>F.option="Average")},{default:(0,r.w5)((()=>[(0,r.Wm)(O,null,{default:(0,r.w5)((()=>[(0,r.Wm)(P,null,{default:(0,r.w5)((()=>[i])),_:1}),(0,r.Wm)(P,{caption:""},{default:(0,r.w5)((()=>[c])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["label"]),(0,r.Wm)(I,{color:"secondary",label:"3D",onClick:t[2]||(t[2]=e=>M.threeDays())},{default:(0,r.w5)((()=>[(0,r.Wm)(q,null,{default:(0,r.w5)((()=>[p])),_:1})])),_:1}),(0,r.Wm)(I,{color:"secondary",label:"1W",onClick:t[3]||(t[3]=e=>M.OneWeek())},{default:(0,r.w5)((()=>[(0,r.Wm)(q,null,{default:(0,r.w5)((()=>[u])),_:1})])),_:1}),(0,r.Wm)(I,{color:"secondary",label:"2W",onClick:t[4]||(t[4]=e=>M.TwoWeeks())},{default:(0,r.w5)((()=>[(0,r.Wm)(q,null,{default:(0,r.w5)((()=>[d])),_:1})])),_:1}),(0,r.Wm)(I,{color:"secondary",label:"1M",onClick:t[5]||(t[5]=e=>M.OneMonth())},{default:(0,r.w5)((()=>[(0,r.Wm)(q,null,{default:(0,r.w5)((()=>[m])),_:1})])),_:1}),(0,r.Wm)(I,{color:"secondary",label:"2M",onClick:t[6]||(t[6]=e=>M.TwoMonths())},{default:(0,r.w5)((()=>[(0,r.Wm)(q,null,{default:(0,r.w5)((()=>[h])),_:1})])),_:1}),(0,r.Wm)(I,{color:"secondary",label:"3M",onClick:t[7]||(t[7]=e=>M.ThreeMonths())},{default:(0,r.w5)((()=>[(0,r.Wm)(q,null,{default:(0,r.w5)((()=>[f])),_:1})])),_:1}),(0,r.Wm)(I,{color:"secondary",label:"6M",onClick:t[8]||(t[8]=e=>M.SixMonths())},{default:(0,r.w5)((()=>[(0,r.Wm)(q,null,{default:(0,r.w5)((()=>[y])),_:1})])),_:1}),(0,r.Wm)(I,{color:"secondary",label:"9M",onClick:t[9]||(t[9]=e=>M.NineMonths())},{default:(0,r.w5)((()=>[(0,r.Wm)(q,null,{default:(0,r.w5)((()=>[w])),_:1})])),_:1}),(0,r.Wm)(I,{color:"secondary",label:"1Y",onClick:t[10]||(t[10]=e=>M.OneYear())},{default:(0,r.w5)((()=>[(0,r.Wm)(q,null,{default:(0,r.w5)((()=>[S])),_:1})])),_:1}),(0,r.Wm)(I,{icon:"event",round:"",color:"secondary"},{default:(0,r.w5)((()=>[(0,r.Wm)(Q,{onBeforeShow:F.proxyDate,"transition-show":"scale","transition-hide":"scale"},{default:(0,r.w5)((()=>[(0,r.Wm)(B,{color:"secondary",range:"",modelValue:F.proxyDate,"onUpdate:modelValue":t[11]||(t[11]=e=>F.proxyDate=e)},{default:(0,r.w5)((()=>[(0,r._)("div",g,[(0,r.wy)((0,r.Wm)(I,{label:"Cancel",color:"primary",flat:""},null,512),[[j]]),(0,r.wy)((0,r.Wm)(I,{label:"OK",color:"primary",flat:"",onClick:M.save},null,8,["onClick"]),[[j]])])])),_:1},8,["modelValue"])])),_:1},8,["onBeforeShow"])])),_:1})])),_:1})])]),(0,r._)("div",x,[(0,r._)("div",k,[(0,r._)("div",W,[(0,r._)("div",v,[(0,r.Wm)(L,{Series:M.generateSeries([{name:"Total-Purchase"}]).Series},null,8,["Series"])]),(0,r._)("div",_,[(0,r.Wm)(L,{Series:M.generateSeries([{name:"Total-Sales"}]).Series},null,8,["Series"])])]),(0,r._)("div",b,[(0,r._)("div",D,[(0,r.Wm)(L,{Series:M.generateSeries([{name:"Gross-Profit",type:"area"}]).Series},null,8,["Series"])]),(0,r._)("div",Z,[(0,r.Wm)(L,{Series:M.generateSeries([{name:"NET-Profit",type:"area"}]).Series},null,8,["Series"])])])]),(0,r._)("div",C,[(0,r.Wm)(N,{Series:M.generateSeries([{name:"Rent-Expence",type:"column"},{name:"Other-Expences",type:"column"},{name:"Personal-Expences",type:"column"},{name:"Bill-Expences",type:"column"},{name:"Masatefiya-Expence",type:"column"},{name:"Sallary-Expence",type:"column"},{name:"LoadingUnloading-Expence",type:"column"},{name:"Transfer-Expence",type:"column"},{name:"Total-Expence",type:"line"}]).Series},null,8,["Series"])])])])),_:1})}function F(e,t,a,s,o,l){const n=(0,r.up)("apexchart");return(0,r.wg)(),(0,r.j4)(n,{width:"100%",options:l.options,series:a.Series},null,8,["options","series"])}var M=a(1514);const P={name:"Sparkle",props:{Series:{type:Array,default(){return[]}}},computed:{options(){return{chart:{id:this.Series[0].name,type:"area",stacked:!0,height:400,sparkline:{enabled:!1}},stroke:{curve:"straight"},fill:{colors:["#008FFB"]},legend:{position:"top",offsetY:-100,offsetX:180,show:!0},xaxis:{type:"datetime"},yaxis:{},colors:M({count:1,hue:"green"}),title:{text:this.Series[0].title+" Birr",offsetX:30,style:{fontSize:"24px",cssClass:"apexcharts-yaxis-title"}},subtitle:{text:this.Series[0].name,offsetX:30,style:{fontSize:"14px",cssClass:"apexcharts-yaxis-title"}}}}}};P.render=F;const O=P,T={id:"chart"};function R(e,t,a,s,o,l){const n=(0,r.up)("apexchart");return(0,r.wg)(),(0,r.iD)("div",T,[(0,r.Wm)(n,{height:"500",options:l.ChartOption,series:a.Series},null,8,["options","series"])])}var U=a(1514);const q={name:"ExpenceChart",props:{Title:{type:String,default:"Total Expence"},Subtitle:{Title:{type:String,default:"0"}},Series:{type:Array,default(){return[]}}},data(){return{}},computed:{color(){return U({count:this.Series.length})},ChartOption(){return{chart:{id:this.Series[0].name,type:"line",stacked:!0,sparkline:{enabled:!1}},stroke:{width:[0,10]},dataLabels:{enabled:!0,enabledOnSeries:[1]},fill:{opacity:1},legend:{position:"bottom",offsetY:0,offsetX:0,show:!0},xaxis:{type:"datetime"},yaxis:{},colors:U({count:this.Series.length,hue:"random",alpha:1}),title:{text:this.Series.slice(-1)[0].title+"Birr",offsetX:30,style:{fontSize:"24px",cssClass:"apexcharts-yaxis-title"}},subtitle:{text:this.Series.slice(-1)[0].name,offsetX:30,style:{fontSize:"14px",cssClass:"apexcharts-yaxis-title"}}}}}};q.render=R;const I=q;var B=a(6249),Q=a(6430),Y=a(4122),L=a(2530),N=a(8554),X=a(9066),j=a(8956),A=a(5525),z=a(589),G=a(5616);const V={name:"Dashboard",components:{Sparkle:O,ExpenceChart:I},data(){return{option:"FIFO",proxyDate:null,templateRequest:{date1:null,date2:null,option:"FIFO",dayInterval:1,weekInterval:0,monthInterval:0,yearInterval:0},report:[],mapper:["Total-Purchase","Total-Sales","Cost-Of-Sales","Gross-Profit","Rent-Expence","Other-Expences","Personal-Expences","Bill-Expences","Masatefiya-Expence","LoadingUnloading-Expence","Sallary-Expence","Transfer-Expence","Other-Incomes","Bank-Deposit","Bank-Withdrawal","Purchases-CreditSettlement","Sales-CreditSettlement","Total-Expence","NET-Profit"]}},methods:{getResourcesLocalStorage(){(0,L.OL)().then((e=>{z.Z.set("Customers",e.data)})).catch((e=>{z.Z.set("Customers",[])})),(0,X.fN)().then((e=>{z.Z.set("Employees",e.data)})).catch((e=>{z.Z.set("Employees",[])})),(0,N.jT)().then((e=>{z.Z.set("Drivers",e.data)})).catch((e=>{z.Z.set("Drivers",[])})),(0,j.rH)().then((e=>{z.Z.set("Suppliers",e.data)})).catch((e=>{z.Z.set("Suppliers",[])})),(0,Y.GR)().then((e=>{z.Z.set("Items",e.data)})).catch((e=>{z.Z.set("Items",[])})),(0,A.go)().then((e=>{z.Z.set("Categories",e.data)})).catch((e=>{z.Z.set("Categories",[])}))},generateSeries(e){var t=[];return e.forEach((e=>{var a=Object.assign({},this.calculated_data[e.name]);"type"in e&&(a["type"]=e.type),t.push(a)})),{Series:t}},dateFOrmatter(e){return G.ZP.formatDate(e,"YYYY-MM-DD")},getReport(e,t,a){const r=this.templateRequest;r.date1=this.dateFOrmatter(e),r.date2=this.dateFOrmatter(t),r.dayInterval=a,r.option=this.option,B.Z.show({message:"Fetching Report Please Wait!!"}),(0,Q.R)(r).then((e=>{B.Z.hide(),this.report=e.data})).catch((e=>{B.Z.hide()}))},threeDays(){var e=new Date,t=e,a=G.ZP.subtractFromDate(e,{days:3});this.getReport(a,t,1)},OneWeek(){var e=new Date,t=e,a=G.ZP.subtractFromDate(e,{days:7});this.getReport(a,t,1)},TwoWeeks(){var e=new Date,t=e,a=G.ZP.subtractFromDate(e,{days:14});this.getReport(a,t,2)},OneMonth(){var e=new Date,t=e,a=G.ZP.subtractFromDate(e,{months:1});this.getReport(a,t,3)},TwoMonths(){var e=new Date,t=e,a=G.ZP.subtractFromDate(e,{months:2});this.getReport(a,t,5)},ThreeMonths(){var e=new Date,t=e,a=G.ZP.subtractFromDate(e,{months:3});this.getReport(a,t,7)},SixMonths(){var e=new Date,t=e,a=G.ZP.subtractFromDate(e,{months:6});this.getReport(a,t,14)},NineMonths(){var e=new Date,t=e,a=G.ZP.subtractFromDate(e,{months:9});this.getReport(a,t,14)},OneYear(){var e=new Date,t=e,a=G.ZP.subtractFromDate(e,{years:1});this.getReport(a,t,30)},save(){var e=this.proxyDate.from,t=this.proxyDate.to;const a=G.ZP.getDateDiff(t,e,"days");this.getReport(e,t,Math.floor(a/10))}},computed:{calculated_data(){var e={};return this.mapper.forEach((t=>{var a=0,r=this.report.map((e=>[e.Date,e.report[t]]));r.length>1&&(a=r.splice(-1)[0][1]),e[t]={name:t,data:r,title:a}})),e}},mounted(){setTimeout((()=>{this.getResourcesLocalStorage()}),500)}};var H=a(4379),K=a(6375),J=a(2226),$=a(1046),ee=a(3414),te=a(2035),ae=a(2350),re=a(2165),se=a(8870),oe=a(3944),le=a(2651),ne=a(677),ie=a(7518),ce=a.n(ie);V.render=E;const pe=V;ce()(V,"components",{QPage:H.Z,QBtnGroup:K.Z,QBtnDropdown:J.Z,QList:$.Z,QItem:ee.Z,QItemSection:te.Z,QItemLabel:ae.Z,QBtn:re.Z,QTooltip:se.Z,QPopupProxy:oe.Z,QDate:le.Z}),ce()(V,"directives",{ClosePopup:ne.Z})}}]);