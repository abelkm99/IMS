"use strict";(self["webpackChunkims"]=self["webpackChunkims"]||[]).push([[2546],{2546:(e,t,l)=>{l.r(t),l.d(t,{default:()=>G});var a=l(3673);function o(e,t,l,o,s,i){const n=(0,a.up)("SalesHeader"),r=(0,a.up)("MakeSales"),m=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(m,{padding:""},{default:(0,a.w5)((()=>[(0,a.Wm)(n),(0,a.Wm)(r)])),_:1})}var s=l(7302),i=l(2323);const n={class:"q-pa-md"},r={class:"q-pa-md column flex flex-center"},m={class:"q-pa-md col justify-center"},d={class:"q-gutter-md row"},u={class:"column q-pa-md justify-evenly"},c={class:"row q-gutter-md q-pt-md"},p={style:{"max-width":"300px"}},h={class:"row items-center justify-end"},y={class:"row items-center justify-end"},_={class:"row q-gutter-md q-pt-md"},f={class:"row q-gutter-md q-pt-md"},v={class:"q-pa-md row justify-center"},w={class:"q-pa-md"},b={class:"row q-pa-md"},D={class:"q-pl-lg"},T=(0,a.Uk)("Total : "),S={class:"text-secondary"};function I(e,t,l,o,s,I){const g=(0,a.up)("q-btn"),V=(0,a.up)("q-date"),N=(0,a.up)("q-popup-proxy"),P=(0,a.up)("q-icon"),q=(0,a.up)("q-time"),Q=(0,a.up)("q-input"),W=(0,a.up)("q-select"),C=(0,a.up)("q-form"),E=(0,a.up)("q-td"),k=(0,a.up)("q-table"),x=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.iD)("div",n,[(0,a._)("div",r,[(0,a._)("div",m,[(0,a.Wm)(C,{onSubmit:I.onSubmit,onReset:I.onReset,class:"q-gutter-md"},{default:(0,a.w5)((()=>[(0,a._)("div",d,[(0,a._)("div",u,[(0,a._)("div",c,[(0,a._)("div",p,[(0,a.Wm)(Q,{color:"secondary",filled:"",modelValue:s.Sales_Date,"onUpdate:modelValue":t[2]||(t[2]=e=>s.Sales_Date=e)},{prepend:(0,a.w5)((()=>[(0,a.Wm)(P,{name:"event",class:"cursor-pointer"},{default:(0,a.w5)((()=>[(0,a.Wm)(N,{"transition-show":"scale","transition-hide":"scale"},{default:(0,a.w5)((()=>[(0,a.Wm)(V,{color:"secondary",modelValue:s.Sales_Date,"onUpdate:modelValue":t[0]||(t[0]=e=>s.Sales_Date=e),mask:"YYYY-MM-DD HH:mm"},{default:(0,a.w5)((()=>[(0,a._)("div",h,[(0,a.wy)((0,a.Wm)(g,{label:"Close",color:"secondary",flat:""},null,512),[[x]])])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),append:(0,a.w5)((()=>[(0,a.Wm)(P,{name:"access_time",class:"cursor-pointer"},{default:(0,a.w5)((()=>[(0,a.Wm)(N,{"transition-show":"scale","transition-hide":"scale"},{default:(0,a.w5)((()=>[(0,a.Wm)(q,{color:"secondary",modelValue:s.Sales_Date,"onUpdate:modelValue":t[1]||(t[1]=e=>s.Sales_Date=e),mask:"YYYY-MM-DD HH:mm",format12h:""},{default:(0,a.w5)((()=>[(0,a._)("div",y,[(0,a.wy)((0,a.Wm)(g,{label:"Close",color:"primary",flat:""},null,512),[[x]])])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"])]),(0,a.Wm)(W,{color:"secondary",filled:"",modelValue:s.Transaction_Type,"onUpdate:modelValue":t[3]||(t[3]=e=>s.Transaction_Type=e),label:"transaction-type",autocomplete:s.transaction_option.map((e=>e.TransactionType)),options:s.transaction_option.map((e=>e.TransactionType)),style:{width:"200px"},behavior:"menu",rules:[I.myRule]},null,8,["modelValue","autocomplete","options","rules"]),(0,a.Wm)(W,{color:"secondary",filled:"",modelValue:s.CustomerName,"onUpdate:modelValue":t[4]||(t[4]=e=>s.CustomerName=e),label:"Customer",autocomplete:s.customer_option.map((e=>e.CustomerName)),options:s.customer_option.map((e=>e.CustomerName)),style:{width:"200px"},behavior:"menu",rules:[I.myRule]},null,8,["modelValue","autocomplete","options","rules"]),(0,a.Wm)(W,{color:"secondary",filled:"",modelValue:s.DriverName,"onUpdate:modelValue":t[5]||(t[5]=e=>s.DriverName=e),label:"Driver",autocomplete:s.driver_option.map((e=>e.DriverName)),options:s.driver_option.map((e=>e.DriverName)),style:{width:"200px"},behavior:"menu"},null,8,["modelValue","autocomplete","options"]),(0,a.Wm)(W,{color:"secondary",filled:"",modelValue:s.EmployeeName,"onUpdate:modelValue":t[6]||(t[6]=e=>s.EmployeeName=e),label:"Employee",autocomplete:s.employee_option.map((e=>e.EmployeeName)),options:s.employee_option.map((e=>e.EmployeeName)),style:{width:"200px"},behavior:"menu"},null,8,["modelValue","autocomplete","options"]),(0,a.Wm)(Q,{color:"secondary",filled:"",type:"text",modelValue:s.Description,"onUpdate:modelValue":t[7]||(t[7]=e=>s.Description=e),label:"Description",style:{width:"250px"},behavior:"menu"},null,8,["modelValue"])]),(0,a._)("div",_,[(0,a.Wm)(Q,{color:"secondary",filled:"",modelValue:s.selected_item,"onUpdate:modelValue":t[8]||(t[8]=e=>s.selected_item=e),type:"number",min:"1",label:"Item Code",hint:"have to be greater than 0"},null,8,["modelValue"]),(0,a.Wm)(Q,{color:"secondary",filled:"",modelValue:s.Quantity,"onUpdate:modelValue":t[9]||(t[9]=e=>s.Quantity=e),type:"number",min:"1",label:"Quantity",hint:"have to be greater than 0"},null,8,["modelValue"]),(0,a.Wm)(Q,{color:"secondary",filled:"",modelValue:s.Price,"onUpdate:modelValue":t[10]||(t[10]=e=>s.Price=e),type:"number",min:"1",label:"Price",hint:"have to be greater than 0"},null,8,["modelValue"])]),(0,a._)("div",f,[(0,a.Wm)(g,{label:"Add Item",color:"secondary",onClick:t[11]||(t[11]=e=>I.addItem())}),(0,a.Wm)(g,{label:"Submit",type:"submit",color:"secondary"}),(0,a.Wm)(g,{label:"Reset",type:"reset",color:"secondary",flat:"",class:"q-ml-sm"})])])])])),_:1},8,["onSubmit","onReset"])]),(0,a._)("div",v,[(0,a._)("div",w,[(0,a.Wm)(k,{title:"Purchase Items",rows:s.rows,columns:s.columns,"row-key":"name",selection:"multiple",selected:s.selected,"onUpdate:selected":t[12]||(t[12]=e=>s.selected=e)},{"top-left":(0,a.w5)((()=>[(0,a._)("div",b,[(0,a._)("span",null,(0,i.zw)(s.title),1),(0,a._)("span",D,[T,(0,a._)("b",S,(0,i.zw)(I.totalPurchase)+" Birr",1)])])])),"top-right":(0,a.w5)((()=>[(0,a.Wm)(g,{color:"negative","icon-right":"delete_forever","no-caps":"",onClick:I.deleteSelected},null,8,["onClick"])])),"body-cell-action":(0,a.w5)((e=>[(0,a.Wm)(E,{props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(g,{color:"negative","icon-right":"delete","no-caps":"",flat:"",dense:"",onClick:t=>I.deleteval(s.rows.indexOf(e.row))},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","selected"])])])])])}var g=l(4122),V=l(755),N=l(2530),P=l(8554),q=l(2986),Q=l(9066),W=l(7428);const C={name:"MakeSales",components:{},props:{Employee:{Type:Boolean,default:!1}},data(){return{selected_item:"",items_option:[],transaction_option:[],customer_option:[],driver_option:[],employee_option:[],Quantity:"",Price:"",model:null,Sales_Date:null,Transaction_Type:null,CustomerName:null,DriverName:null,EmployeeName:null,Description:null,SalesString:"",rows:[],columns:[{name:"ItemType",label:"ItemType",field:"ItemType",align:"left",sortable:!0},{name:"Price",label:"Price",field:"Price",sortable:!0},{name:"Quantity",label:"Quantity",field:"Quantity",sortable:!0},{name:"Total",label:"Total",field:"Total",sortable:!0},{name:"action",label:"Action",field:"action"}],title:"Purchase Items",selected:[]}},methods:{myRule(e){if(null===e)return"Empty Feild!!"},addItem(){if(null==this.selected_item||""==this.selected_item)(0,W.j)("Item Type Feild can't be empty!");else if(this.added_before())if(this.Quantity<1||null==this.Quantity)(0,W.j)("Please Enter a valid Number for Quantity");else if(this.Price<1||null==this.Price)(0,W.j)("Please Enter a valid Number for Price");else{var e=this.items_option.find((e=>e.ItemCode===this.selected_item));if(e){var t={ItemType:e.ItemType,Quantity:this.Quantity,Price:this.Price,Total:this.Quantity*this.Price};this.rows.push(t),this.selected_item=null,this.Quantity=null,this.Price=null}else(0,W.j)("Item Code Doesn't exist")}else(0,W.j)(`item type ${this.selected_item} is already added to the purchase list`)},added_before(){return void 0==this.rows.find((e=>e.ItemType===this.selected_item))},onSubmit(){if(null==this.Sales_Date)(0,W.j)("Please Fill The Purchased Date");else if(this.SalesString=this.getSalesString(),null==this.SalesString)(0,W.j)("No Purchase Item is listed");else{const e={Date:this.Sales_Date,CustomerID:this.customer_option.find((e=>e.CustomerName===this.CustomerName)).CustomerID,TransactionID:this.transaction_option.find((e=>e.TransactionType===this.Transaction_Type)).TransactionID,EmployeeID:this.employee_option.find((e=>e.EmployeeName===this.EmployeeName)).EmployeeID,DriverID:null!=this.DriverName?this.driver_option.find((e=>e.DriverName===this.DriverName)).DriverID:"",SalesInformation:this.getSalesString(),Description:this.Description};(0,q.J3)(e).then((e=>{(0,W.U)(e.data.message,"positive","top"),this.Employee?this.$router.push({name:"Esales"}):this.$router.push({name:"sales"})})).catch((e=>{(0,W.j)(e.response.data.message,"negative","top")}))}},onReset(){this.selected_item=null,this.Transaction_Type=null,this.Sales_Date=null,this.CustomerName=null,this.DriverName=null,this.EmployeeName=null,this.Description=null,this.Quantity=null,this.Price=null,this.rows=[]},getItemID(e){return this.items_option.find((t=>t.ItemType===e)).ItemID},getSalesString(){var e="";return this.rows.forEach((t=>{e+=this.getItemID(t.ItemType)+","+t.Price+","+t.Quantity+";"})),e.length>0?e:null},deleteSelected(){let e=this;this.selected.filter((function(t){return e.rows.splice(e.rows.indexOf(t),1),t})),this.selected=[]},deleteval(e){this.rows.splice(e,1)}},computed:{totalPurchase(){var e=0;return this.rows.forEach((t=>{e+=parseInt(t.Total)})),e}},mounted(){(0,g.GR)().then((e=>{this.items_option=e.data})).catch((e=>{})),(0,V.i)().then((e=>{this.transaction_option=e.data})).catch((e=>{})),(0,N.OL)().then((e=>{this.customer_option=e.data})).catch((e=>{})),(0,Q.fN)().then((e=>{this.employee_option=e.data})).catch((e=>{})),(0,P.jT)().then((e=>{this.driver_option=e.data})).catch((e=>{}))}};var E=l(5269),k=l(4842),x=l(4554),j=l(3944),U=l(2651),Z=l(2165),R=l(5990),Y=l(8516),M=l(3243),H=l(3884),F=l(677),A=l(7518),B=l.n(A);C.render=I;const O=C;B()(C,"components",{QForm:E.Z,QInput:k.Z,QIcon:x.Z,QPopupProxy:j.Z,QDate:U.Z,QBtn:Z.Z,QTime:R.Z,QSelect:Y.Z,QTable:M.Z,QTd:H.Z}),B()(C,"directives",{ClosePopup:F.Z});const $={name:"AddSales",components:{SalesHeader:s.Z,MakeSales:O}};var z=l(4379);$.render=o;const G=$;B()($,"components",{QPage:z.Z})}}]);