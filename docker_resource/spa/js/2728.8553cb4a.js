"use strict";(self["webpackChunkims"]=self["webpackChunkims"]||[]).push([[2728],{2728:(e,l,a)=>{a.r(l),a.d(l,{default:()=>J});var o=a(3673),t=a(2323),s=a(8880);const n={class:"q-gutter-md"},d={class:"q-pa-md"},r={class:"q-pa-xl"},i={class:"row q-gutter-md"},p={class:"col q-pt-md q-gutter-md"},m=(0,o._)("span",{class:"q-pl-xl"}," Add Salary expense",-1),u={class:"row q-gutter-md"},c={class:"column"},y={class:"row q-pa-lg q-gutter-lg"},w={class:"row items-center justify-end"},h={class:"row q-pa-lg q-gutter-lg"},_=(0,o._)("div",{class:"row-12 q-pt-md q-pl-xl"},null,-1),f={class:"q-pa-xl"},D={class:"row q-gutter-md"},g={class:"row items-center justify-end"},v={class:"row items-center justify-end"},b={class:"col-2 q-table__title"},V={key:0,class:"col"},x={class:"q-pa-md",style:{"max-width":"300px"}},W={class:"row items-center justify-end"};function q(e,l,a,q,U,C){const E=(0,o.up)("ShopexpenseHeader"),S=(0,o.up)("DeleteDialogBox"),k=(0,o.up)("q-btn"),N=(0,o.up)("q-date"),I=(0,o.up)("q-popup-proxy"),Y=(0,o.up)("q-icon"),Z=(0,o.up)("q-input"),R=(0,o.up)("q-select"),Q=(0,o.up)("q-form"),j=(0,o.up)("q-space"),M=(0,o.up)("q-toggle"),P=(0,o.up)("q-item"),F=(0,o.up)("q-td"),T=(0,o.up)("q-popup-edit"),z=(0,o.up)("q-tr"),K=(0,o.up)("q-table"),$=(0,o.up)("q-page"),B=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.j4)($,{padding:""},{default:(0,o.w5)((()=>[(0,o._)("div",n,[(0,o.Wm)(E)]),(0,o._)("div",d,[(0,o.Wm)(S,{onResponse:C.getResponse,ref:"confirmbox"},null,8,["onResponse"]),(0,o._)("div",r,[(0,o._)("div",i,[(0,o._)("div",p,[m,(0,o.Wm)(Q,{onSubmit:C.add_Salary_expense,onReset:C.onReset,class:"q-gutter-md"},{default:(0,o.w5)((()=>[(0,o._)("div",u,[(0,o._)("div",c,[(0,o._)("div",y,[(0,o.Wm)(Z,{color:"secondary",label:"Date",filled:"",modelValue:U.Selected_Date,"onUpdate:modelValue":l[1]||(l[1]=e=>U.Selected_Date=e)},{prepend:(0,o.w5)((()=>[(0,o.Wm)(Y,{name:"event",class:"cursor-pointer"},{default:(0,o.w5)((()=>[(0,o.Wm)(I,{"transition-show":"scale","transition-hide":"scale"},{default:(0,o.w5)((()=>[(0,o.Wm)(N,{color:"secondary",modelValue:U.Selected_Date,"onUpdate:modelValue":l[0]||(l[0]=e=>U.Selected_Date=e),mask:"YYYY-MM-DD"},{default:(0,o.w5)((()=>[(0,o._)("div",w,[(0,o.wy)((0,o.Wm)(k,{label:"Close",color:"secondary",flat:""},null,512),[[B]])])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(R,{color:"secondary",filled:"",modelValue:U.Selected_Employee,"onUpdate:modelValue":l[2]||(l[2]=e=>U.Selected_Employee=e),label:"Select Employee",options:U.employees.map((e=>e.EmployeeName)),style:{width:"250px"},behavior:"menu",rules:[C.myRule]},null,8,["modelValue","options","rules"]),(0,o.Wm)(Z,{color:"secondary",modelValue:U.Filled_Cost,"onUpdate:modelValue":l[3]||(l[3]=e=>U.Filled_Cost=e),type:"number",min:"1",filled:"",label:"Salary Cost",rules:[C.myRule]},null,8,["modelValue","rules"]),(0,o.Wm)(Z,{color:"secondary",modelValue:U.Description,"onUpdate:modelValue":l[4]||(l[4]=e=>U.Description=e),type:"text",min:"1",filled:"",label:"Descriptin"},null,8,["modelValue"])]),(0,o._)("div",h,[(0,o.Wm)(k,{label:"Add expense",type:"submit",color:"secondary"}),(0,o.Wm)(k,{label:"Reset",type:"reset",color:"secondary",flat:"",class:"q-ml-sm"})])])])])),_:1},8,["onSubmit","onReset"])])]),_]),(0,o._)("div",f,[(0,o.Wm)(K,{title:U.title,rows:U.rows,columns:U.columns,"row-key":"CustomerTable","visible-columns":U.visibleColumns,loading:U.loading,color:"secondary",pagination:U.pagination,"onUpdate:pagination":l[15]||(l[15]=e=>U.pagination=e),onRequest:C.handleRequest,"rows-per-page-options":[]},{"top-right":(0,o.w5)((()=>[(0,o._)("div",D,[(0,o.Wm)(Z,{color:"secondary",style:{width:"125px"},label:"Date",filled:"",modelValue:U.search_data.D1,"onUpdate:modelValue":l[6]||(l[6]=e=>U.search_data.D1=e)},{prepend:(0,o.w5)((()=>[(0,o.Wm)(Y,{name:"event",class:"cursor-pointer"},{default:(0,o.w5)((()=>[(0,o.Wm)(I,{"transition-show":"scale","transition-hide":"scale"},{default:(0,o.w5)((()=>[(0,o.Wm)(N,{color:"secondary",modelValue:U.search_data.D1,"onUpdate:modelValue":l[5]||(l[5]=e=>U.search_data.D1=e),mask:"YYYY-MM-DD"},{default:(0,o.w5)((()=>[(0,o._)("div",g,[(0,o.wy)((0,o.Wm)(k,{label:"Close",color:"secondary",flat:""},null,512),[[B]])])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(Z,{color:"secondary",style:{width:"125px"},label:"Date",filled:"",modelValue:U.search_data.D2,"onUpdate:modelValue":l[8]||(l[8]=e=>U.search_data.D2=e)},{prepend:(0,o.w5)((()=>[(0,o.Wm)(Y,{name:"event",class:"cursor-pointer"},{default:(0,o.w5)((()=>[(0,o.Wm)(I,{"transition-show":"scale","transition-hide":"scale"},{default:(0,o.w5)((()=>[(0,o.Wm)(N,{color:"secondary",modelValue:U.search_data.D2,"onUpdate:modelValue":l[7]||(l[7]=e=>U.search_data.D2=e),mask:"YYYY-MM-DD"},{default:(0,o.w5)((()=>[(0,o._)("div",v,[(0,o.wy)((0,o.Wm)(k,{label:"Close",color:"secondary",flat:""},null,512),[[B]])])])),_:1},8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(Z,{color:"secondary",style:{width:"100px"},modelValue:U.search_data.EmployeeName,"onUpdate:modelValue":l[9]||(l[9]=e=>U.search_data.EmployeeName=e),outlined:"",filled:"",type:"text",label:"Employee Name"},null,8,["modelValue"]),(0,o.Wm)(R,{color:"secondary",style:{width:"100px"},modelValue:U.search_data.order,"onUpdate:modelValue":l[10]||(l[10]=e=>U.search_data.order=e),options:["Ascending ","Descending "],label:"Order Type",filled:""},null,8,["modelValue"]),(0,o.Wm)(k,{label:"Search",color:"secondary","icon-right":"search","no-caps":"",flat:"",dense:"",onClick:l[11]||(l[11]=e=>C.search())}),(0,o.Wm)(k,{label:"Reset",color:"negative","no-caps":"",flat:"",dense:"",onClick:l[12]||(l[12]=e=>C.reset())})])])),"top-left":(0,o.w5)((a=>[(0,o._)("div",b,(0,t.zw)(U.title),1),(0,o.Wm)(j),e.$q.screen.gt.xs?((0,o.wg)(),(0,o.iD)("div",V,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(C.toogle_columns,(e=>((0,o.wg)(),(0,o.j4)(P,{style:{display:"inline"},key:e},{default:(0,o.w5)((()=>[(0,o.Wm)(M,{modelValue:U.visibleColumns,"onUpdate:modelValue":l[13]||(l[13]=e=>U.visibleColumns=e),val:e.name,label:e.label,color:"secondary"},null,8,["modelValue","val","label"])])),_:2},1024)))),128))])):((0,o.wg)(),(0,o.j4)(R,{key:1,color:"secondary",modelValue:U.visibleColumns,"onUpdate:modelValue":l[14]||(l[14]=e=>U.visibleColumns=e),multiple:"",borderless:"",dense:"","options-dense":"","display-value":e.$q.lang.table.columns,"emit-value":"","map-options":"",options:U.columns,"option-value":"name",style:{"min-width":"150px"}},null,8,["modelValue","display-value","options"])),(0,o.Wm)(k,{color:"secondary","icon-right":"archive",label:"Export to csv","no-caps":"",onClick:C.exportTable},null,8,["onClick"]),(0,o.Wm)(k,{flat:"",round:"",dense:"",icon:a.inFullscreen?"fullscreen_exit":"fullscreen",onClick:a.toggleFullscreen,class:"q-ml-md"},null,8,["icon","onClick"])])),body:(0,o.w5)((e=>[(0,o.Wm)(z,{props:e},{default:(0,o.w5)((()=>[(0,o.Wm)(F,{key:"SalaryID",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,t.zw)(e.row.SalaryID),1)])),_:2},1032,["props"]),(0,o.Wm)(F,{key:"EmployeeName",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,t.zw)(e.row.EmployeeName)+" ",1),(0,o.Wm)(T,{modelValue:e.row.EmployeeName,"onUpdate:modelValue":l=>e.row.EmployeeName=l,title:"Update Employee",buttons:"",persistent:"",validate:l=>C.update_sallary({key:"EmployeeName",value:l},U.rows.indexOf(e.row)),"label-set":"Update",color:"secondary",class:"text-secondary"},{default:(0,o.w5)((e=>[(0,o.Wm)(R,{color:"secondary",modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,hint:"Select Employee",options:U.employees.map((e=>e.EmployeeName)),dense:"",autofocus:"",onKeyup:(0,s.D2)(e.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","options","onKeyup"])])),_:2},1032,["modelValue","onUpdate:modelValue","validate"])])),_:2},1032,["props"]),(0,o.Wm)(F,{key:"Date",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,t.zw)(e.row.Date)+" ",1),(0,o.Wm)(T,{modelValue:e.row.Date,"onUpdate:modelValue":l=>e.row.Date=l,title:"Update Date",buttons:"",persistent:"",validate:l=>C.update_sallary({key:"Date",value:l},U.rows.indexOf(e.row)),"label-set":"Update",color:"secondary",class:"text-secondary"},{default:(0,o.w5)((e=>[(0,o._)("div",x,[(0,o.Wm)(Z,{color:"secondary",filled:"",modelValue:e.value,"onUpdate:modelValue":l=>e.value=l},{prepend:(0,o.w5)((()=>[(0,o.Wm)(Y,{name:"event",class:"cursor-pointer"},{default:(0,o.w5)((()=>[(0,o.Wm)(I,{"transition-show":"scale","transition-hide":"scale"},{default:(0,o.w5)((()=>[(0,o.Wm)(N,{color:"secondary",modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,mask:"YYYY-MM-DD"},{default:(0,o.w5)((()=>[(0,o._)("div",W,[(0,o.wy)((0,o.Wm)(k,{label:"Close",color:"secondary",flat:""},null,512),[[B]])])])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue"])])])),_:2},1032,["modelValue","onUpdate:modelValue","validate"])])),_:2},1032,["props"]),(0,o.Wm)(F,{key:"Cost",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,t.zw)(e.row.Cost)+" ",1),(0,o.Wm)(T,{modelValue:e.row.Cost,"onUpdate:modelValue":l=>e.row.Cost=l,modelModifiers:{number:!0},title:"Update Item Price",buttons:"",persistent:"",validate:l=>C.update_sallary({key:"Cost",value:l},U.rows.indexOf(e.row)),"label-set":"Update",color:"secondary",class:"text-secondary"},{default:(0,o.w5)((e=>[(0,o.Wm)(Z,{color:"secondary",type:"number",modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,modelModifiers:{number:!0},hint:"Enter a number greater than 0",dense:"",autofocus:"",onKeyup:(0,s.D2)(e.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])])),_:2},1032,["modelValue","onUpdate:modelValue","validate"])])),_:2},1032,["props"]),(0,o.Wm)(F,{key:"Description",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,t.zw)(e.row.Description)+" ",1),(0,o.Wm)(T,{modelValue:e.row.Description,"onUpdate:modelValue":l=>e.row.Description=l,modelModifiers:{number:!0},title:"Update Expence Desciption",buttons:"",persistent:"",validate:l=>C.update_sallary({key:"Description",value:l},U.rows.indexOf(e.row)),"label-set":"Update",color:"secondary",class:"text-secondary"},{default:(0,o.w5)((e=>[(0,o.Wm)(Z,{color:"secondary",type:"text",modelValue:e.value,"onUpdate:modelValue":l=>e.value=l,dense:"",autofocus:"",onKeyup:(0,s.D2)(e.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])])),_:2},1032,["modelValue","onUpdate:modelValue","validate"])])),_:2},1032,["props"]),(0,o.Wm)(F,{key:"Delete",props:e},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{color:"negative","icon-right":"delete","no-caps":"",flat:"",dense:"",onClick:l=>C.show_dialog_box(U.rows.indexOf(e.row))},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["title","rows","columns","visible-columns","loading","pagination","onRequest"])])])])),_:1})}var U=a(6966),C=a(5333),E=a(2841),S=a(7428),k=a(7602),N=a(9066);const I={name:"Salaryexpenses",components:{ShopexpenseHeader:C.Z,DeleteDialogBox:U.Z},data(){return{pagination:{descending:!1,page:1,rowsPerPage:2},search_data:{page:1,EmployeeName:"",D1:"",D2:"",order:"Descending"},Selected_Date:null,Filled_Cost:null,Selected_Employee:null,Description:null,loading:!0,title:"Salary Expences List",visibleColumns:["EmployeeName","Date","Cost","Description"],columns:[{name:"SalaryID",label:"Salary ID",field:"SalaryID",align:"left",sortable:!0,required:!0},{name:"EmployeeName",label:"Customer Name",field:"EmployeeName",align:"left",sortable:!0},{name:"Date",label:"Date",field:"Date",sortable:!0},{name:"Cost",label:"Cost",field:"Cost",sortable:!0},{name:"Description",label:"Description",field:"Description",sortable:!0},{name:"Delete",label:"Delete",field:"Delete",required:!0}],selected_index:null,rows:[],employees:[]}},computed:{toogle_columns(){return this.columns.filter((e=>!0!==e.required))}},methods:{handleRequest(e){this.fetch_rows(e.pagination.page)},reset(){this.search_data={page:1,EmployeeName:"",D1:"",D2:"",order:"Descending"},this.fetch_rows(1)},search(){this.fetch_rows(1)},request_data_builder(e){var l=this.search_data;return l.page=e,l},fetch_rows(e){(0,k.Wy)(this.request_data_builder(e)).then((e=>{const l=e.data.meta_data;this.pagination.page=l.current_page,this.pagination.rowsPerPage=l.per_page,this.pagination.rowsNumber=l.total,this.rows=e.data.data,this.loading=!1})).catch((e=>{this.rows=[],this.rows=e.response.data.data,this.loading=!1}))},myRule(e){if(null===e)return"Empty Feild!!"},getResponse(e){if(e){const e={SalaryID:this.rows[this.selected_index].SalaryID};(0,k.gv)(e).then((e=>{(0,S.U)(e.data.message,"positive","top"),this.rows.splice(this.selected_index,1),this.selected_index=null,this.$refs.confirmbox.response=!1})).catch((e=>{(0,S.j)(e.response.data.message,"negative","top")}))}},add_Salary_expense(){if(null==this.Selected_Date)(0,S.j)("Please select the Date first");else{const e={Date:this.Selected_Date,Cost:this.Filled_Cost,EmployeeID:this.employees.find((e=>e.EmployeeName===this.Selected_Employee)).EmployeeID,Description:this.Description};(0,k.Yz)(e).then((e=>{(0,S.U)(e.data.message,"positive","top"),this.rows=[],this.fetch_rows(1)})).catch((e=>{(0,S.j)(e.response.data.message,"negative","top")}))}},onReset(){this.Selected_Employee=null,this.Selected_Date=null,this.Filled_Cost=null},update_sallary(e,l){var a=this.rows[l],o=e;a[o.key]=o.value,a.EmployeeID=this.employees.find((e=>e.EmployeeName===a.EmployeeName)).EmployeeID;const t={Date:a.Date,Cost:a.Cost,EmployeeID:a.EmployeeID,SalaryID:a.SalaryID,Description:a.Description};(0,k.qY)(t).then((e=>((0,S.U)(e.data.message,"positive","top"),this.BankAccount=[],this.fetch_rows(props.pagination.page),!0))).catch((e=>((0,S.j)(e.response.data.message,"negative","top"),this.BankAccount=[],this.fetch_rows(props.pagination.page),!1)))},show_dialog_box(e){this.$refs.confirmbox.message=`${this.rows[e].EmployeeName}'s Salary expense`,this.$refs.confirmbox.confirm=!0,this.selected_index=e},wrapCsvValue(e,l){let a=void 0!==l?l(e):e;return a=void 0===a||null===a?"":String(a),a=a.split('"').join('""'),`"${a}"`},exportTable(){const e=[this.columns.map((e=>this.wrapCsvValue(e.label)))].concat(this.rows.map((e=>this.columns.map((l=>this.wrapCsvValue("function"===typeof l.field?l.field(e):e[void 0===l.field?l.name:l.field],l.format))).join(",")))).join("\r\n"),l=(0,E.Z)("table-export.csv",e,"text/csv");!0!==l&&(0,S.j)("Browser denied file download...")}},mounted(){(0,N.fN)().then((e=>{this.employees=e.data})).catch((e=>{})),this.fetch_rows(1)}};var Y=a(4379),Z=a(5269),R=a(4842),Q=a(4554),j=a(3944),M=a(2651),P=a(2165),F=a(8516),T=a(3243),z=a(2025),K=a(3414),$=a(8886),B=a(8186),O=a(3884),A=a(1289),H=a(677),L=a(7518),G=a.n(L);I.render=q;const J=I;G()(I,"components",{QPage:Y.Z,QForm:Z.Z,QInput:R.Z,QIcon:Q.Z,QPopupProxy:j.Z,QDate:M.Z,QBtn:P.Z,QSelect:F.Z,QTable:T.Z,QSpace:z.Z,QItem:K.Z,QToggle:$.Z,QTr:B.Z,QTd:O.Z,QPopupEdit:A.Z}),G()(I,"directives",{ClosePopup:H.Z})}}]);