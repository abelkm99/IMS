"use strict";(self["webpackChunkims"]=self["webpackChunkims"]||[]).push([[4743],{4743:(e,o,l)=>{l.r(o),l.d(o,{default:()=>O});var a=l(3673);const t={class:"flex flex-center"};function s(e,o,l,s,n,p){const d=(0,a.up)("EmployeeHeader"),i=(0,a.up)("EmployeesTable"),m=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(m,{padding:""},{default:(0,a.w5)((()=>[(0,a.Wm)(d),(0,a._)("div",t,[(0,a.Wm)(i)])])),_:1})}var n=l(2323),p=l(8880);const d={class:"q-pa-xl"},i={class:"col-2 q-table__title"},m={key:0,class:"col"},r={key:0,class:"q-gutter-md q-ml-none"},u=(0,a.Uk)(" Activate Employee "),c=(0,a.Uk)(" Deactivate Employee "),y={key:1,class:"q-gutter-md q-ml-none"},w=(0,a.Uk)(" Activate Employee "),v=(0,a.Uk)(" Deactivate Employee ");function f(e,o,l,t,s,f){const h=(0,a.up)("DeleteDialogBox"),g=(0,a.up)("q-space"),E=(0,a.up)("q-toggle"),_=(0,a.up)("q-item"),b=(0,a.up)("q-select"),k=(0,a.up)("q-btn"),U=(0,a.up)("q-td"),V=(0,a.up)("q-input"),W=(0,a.up)("q-popup-edit"),q=(0,a.up)("q-tooltip"),x=(0,a.up)("q-fab-action"),N=(0,a.up)("q-fab"),D=(0,a.up)("q-tr"),C=(0,a.up)("q-table");return(0,a.wg)(),(0,a.iD)("div",d,[(0,a.Wm)(h,{onResponse:f.getResponse,ref:"confirmbox"},null,8,["onResponse"]),(0,a.Wm)(C,{title:s.title,rows:s.rows,columns:s.columns,"row-key":"name","visible-columns":s.visibleColumns,loading:s.loading,color:"secondary",pagination:s.pagination,"onUpdate:pagination":o[2]||(o[2]=e=>s.pagination=e),onRequest:f.handleRequest,"rows-per-page-options":[]},{top:(0,a.w5)((l=>[(0,a._)("div",i,(0,n.zw)(s.title),1),(0,a.Wm)(g),e.$q.screen.gt.xs?((0,a.wg)(),(0,a.iD)("div",m,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(f.toogle_columns,(e=>((0,a.wg)(),(0,a.j4)(_,{style:{display:"inline"},key:e},{default:(0,a.w5)((()=>[(0,a.Wm)(E,{modelValue:s.visibleColumns,"onUpdate:modelValue":o[0]||(o[0]=e=>s.visibleColumns=e),val:e.name,label:e.label,color:"secondary"},null,8,["modelValue","val","label"])])),_:2},1024)))),128))])):((0,a.wg)(),(0,a.j4)(b,{key:1,color:"secondary",modelValue:s.visibleColumns,"onUpdate:modelValue":o[1]||(o[1]=e=>s.visibleColumns=e),multiple:"",borderless:"",dense:"","options-dense":"","display-value":e.$q.lang.table.columns,"emit-value":"","map-options":"",options:s.columns,"option-value":"name",style:{"min-width":"150px"}},null,8,["modelValue","display-value","options"])),(0,a.Wm)(k,{color:"secondary","icon-right":"archive",label:"Export to csv","no-caps":"",onClick:f.exportTable},null,8,["onClick"]),(0,a.Wm)(k,{flat:"",round:"",dense:"",icon:l.inFullscreen?"fullscreen_exit":"fullscreen",onClick:l.toggleFullscreen,class:"q-ml-md"},null,8,["icon","onClick"])])),body:(0,a.w5)((e=>[(0,a.Wm)(D,{props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(U,{key:"EmployeeID",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.row.EmployeeID),1)])),_:2},1032,["props"]),(0,a.Wm)(U,{key:"EmployeeName",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.row.EmployeeName)+" ",1),(0,a.Wm)(W,{modelValue:e.row.EmployeeName,"onUpdate:modelValue":o=>e.row.EmployeeName=o,title:"Update Employee Name",buttons:"",persistent:"",validate:o=>f.update_employee({key:"EmployeeName",value:o},s.rows.indexOf(e.row)),"label-set":"Update",color:"secondary",class:"text-secondary"},{default:(0,a.w5)((e=>[(0,a.Wm)(V,{color:"secondary",modelValue:e.value,"onUpdate:modelValue":o=>e.value=o,dense:"",autofocus:"",onKeyup:(0,p.D2)(e.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])])),_:2},1032,["modelValue","onUpdate:modelValue","validate"])])),_:2},1032,["props"]),(0,a.Wm)(U,{key:"EmployeeAddress",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.row.EmployeeAddress)+" ",1),(0,a.Wm)(W,{modelValue:e.row.EmployeeAddress,"onUpdate:modelValue":o=>e.row.EmployeeAddress=o,title:"Update Employee Address",buttons:"",persistent:"",validate:o=>f.update_employee({key:"EmployeeAddress",value:o},s.rows.indexOf(e.row)),"label-set":"Update",color:"secondary",class:"text-secondary"},{default:(0,a.w5)((e=>[(0,a.Wm)(V,{color:"secondary",modelValue:e.value,"onUpdate:modelValue":o=>e.value=o,dense:"",autofocus:"",onKeyup:(0,p.D2)(e.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])])),_:2},1032,["modelValue","onUpdate:modelValue","validate"])])),_:2},1032,["props"]),(0,a.Wm)(U,{key:"EmployeePhoneNumber",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.row.EmployeePhoneNumber)+" ",1),(0,a.Wm)(W,{modelValue:e.row.EmployeePhoneNumber,"onUpdate:modelValue":o=>e.row.EmployeePhoneNumber=o,title:"Update Employee Phonenumber",buttons:"",persistent:"",validate:o=>f.update_employee({key:"EmployeePhoneNumber",value:o},s.rows.indexOf(e.row)),"label-set":"Update",color:"secondary",class:"text-secondary"},{default:(0,a.w5)((e=>[(0,a.Wm)(V,{color:"secondary",modelValue:e.value,"onUpdate:modelValue":o=>e.value=o,dense:"",autofocus:"",onKeyup:(0,p.D2)(e.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])])),_:2},1032,["modelValue","onUpdate:modelValue","validate"])])),_:2},1032,["props"]),(0,a.Wm)(U,{key:"EmployeeUserName",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.row.EmployeeUserName)+" ",1),(0,a.Wm)(W,{modelValue:e.row.EmployeeUserName,"onUpdate:modelValue":o=>e.row.EmployeeUserName=o,title:"Update Employee Username",buttons:"",persistent:"",validate:o=>f.update_employee({key:"EmployeeUserName",value:o},s.rows.indexOf(e.row)),"label-set":"Update",color:"secondary",class:"text-secondary"},{default:(0,a.w5)((e=>[(0,a.Wm)(V,{color:"secondary",modelValue:e.value,"onUpdate:modelValue":o=>e.value=o,dense:"",autofocus:"",onKeyup:(0,p.D2)(e.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])])),_:2},1032,["modelValue","onUpdate:modelValue","validate"])])),_:2},1032,["props"]),(0,a.Wm)(U,{key:"EmployeePassword",props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,n.zw)(e.row.EmployeePassword),1)])),_:2},1032,["props"]),(0,a.Wm)(U,{key:"Activated",props:e},{default:(0,a.w5)((()=>[e.row.Activated?((0,a.wg)(),(0,a.iD)("div",r,[(0,a.Wm)(N,{color:"positive",icon:"check_circle",flat:"",direction:"left"},{default:(0,a.w5)((()=>[(0,a.Wm)(x,{color:"positive",onClick:o=>f.activate_employee(e.row.EmployeeID),icon:"check_circle"},{default:(0,a.w5)((()=>[(0,a.Wm)(q,null,{default:(0,a.w5)((()=>[u])),_:1})])),_:2},1032,["onClick"]),(0,a.Wm)(x,{color:"negative",onClick:o=>f.deactivate_employee(e.row.EmployeeID),icon:"highlight_off"},{default:(0,a.w5)((()=>[(0,a.Wm)(q,null,{default:(0,a.w5)((()=>[c])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)])):(0,a.kq)("",!0),e.row.Activated?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",y,[(0,a.Wm)(N,{color:"negative",icon:"highlight_off",flat:"",direction:"left"},{default:(0,a.w5)((()=>[(0,a.Wm)(x,{color:"positive",onClick:o=>f.activate_employee(e.row.EmployeeID),icon:"check_circle"},{default:(0,a.w5)((()=>[(0,a.Wm)(q,null,{default:(0,a.w5)((()=>[w])),_:1})])),_:2},1032,["onClick"]),(0,a.Wm)(x,{color:"negative",onClick:o=>f.deactivate_employee(e.row.EmployeeID),icon:"highlight_off"},{default:(0,a.w5)((()=>[(0,a.Wm)(q,null,{default:(0,a.w5)((()=>[v])),_:1})])),_:2},1032,["onClick"])])),_:2},1024)]))])),_:2},1032,["props"]),(0,a.Wm)(U,{key:"Delete",props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(k,{color:"negative","icon-right":"delete","no-caps":"",flat:"",dense:"",onClick:o=>f.show_dialog_box(s.rows.indexOf(e.row))},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["title","rows","columns","visible-columns","loading","pagination","onRequest"])])}var h=l(2841),g=l(6966),E=l(9066),_=l(7428),b=l(589);const k={name:"EmployeesTable",components:{DeleteDialogBox:g.Z},data(){return{pagination:{descending:!1,page:1,rowsPerPage:2},search_data:{page:1},loading:!1,title:"Employee",visibleColumns:["EmployeeName","EmployeePhoneNumber","EmployeeAddress","EmployeeUserName","Activated"],columns:[{name:"EmployeeID",label:"Employee ID",field:"EmployeeID",align:"left",required:!0},{name:"EmployeeName",label:"Employee Name",field:"EmployeeName",align:"left"},{name:"EmployeeAddress",label:"Employee Address",field:"EmployeeAddress"},{name:"EmployeePhoneNumber",label:"Employee Phone-Number",field:"EmployeePhoneNumber"},{name:"EmployeeUserName",label:"Employee Username",field:"EmployeeUserName"},{name:"EmployeePassword",label:"Employee Password",field:"EmployeePassword"},{name:"Activated",label:"Status",field:"Activated",required:!0,align:"center"},{name:"Delete",label:"Delete",field:"Delete",required:!0}],rows:[],selected_index:null}},computed:{toogle_columns(){return this.columns.filter((e=>!0!==e.required))}},methods:{handleRequest(e){this.fetch_rows(e.pagination.page)},request_data_builder(e){var o=this.search_data;return o.page=e,o},fetch_rows(e){(0,E.Dv)(this.request_data_builder(e)).then((e=>{const o=e.data.meta_data;this.pagination.page=o.current_page,this.pagination.rowsPerPage=o.per_page,this.pagination.rowsNumber=o.total,this.rows=e.data.data,this.loading=!1})).catch((e=>{this.rows=[],this.rows=e.response.data.data,this.loading=!1}))},activate_employee(e){const o={EmployeeId:e};(0,E.PT)(o).then((o=>{(0,_.U)(o.data.message,"positive","top");var l=this.rows.findIndex((o=>o.EmployeeID===e));this.rows[l].Activated=!0})).catch((e=>{(0,_.j)(e.response.data.message,"negative","top")}))},deactivate_employee(e){const o={EmployeeId:e};(0,E.WG)(o).then((o=>{(0,_.U)(o.data.message,"positive","top");var l=this.rows.findIndex((o=>o.EmployeeID===e));this.rows[l].Activated=!1})).catch((e=>{(0,_.j)(e.response.data.message,"negative","top")}))},getResponse(e){if(e){const e={EmployeeId:this.rows[this.selected_index].EmployeeID};(0,E.jw)(e).then((e=>{e.data,(0,_.U)(e.data.message,"positive","top"),(0,E.fN)().then((e=>{b.Z.set("Employees",e.data)})).catch((e=>{b.Z.set("Employees",[])})),this.rows.splice(this.selected_index,1),this.selected_index=null,this.$refs.confirmbox.response=!1})).catch((e=>{(0,_.j)(e.response.data.message,"negative","top")}))}},update_employee(e,o){var l=this.rows[o],a=e;l[a.key]=a.value;const t={EmployeeName:l.EmployeeName,EmployeePhoneNumber:l.EmployeePhoneNumber,EmployeeAddress:l.EmployeeAddress,EmployeeId:l.EmployeeID};(0,E.HG)(t).then((e=>((0,_.U)(e.data.message,"positive","top"),(0,E.fN)().then((e=>{b.Z.set("Employees",e.data)})).catch((e=>{b.Z.set("Employees",[])})),!0))).catch((e=>((0,_.j)(e.response.data.message,"negative","top"),this.rows=[],this.fetch_rows(props.pagination.page),!1)))},show_dialog_box(e){this.$refs.confirmbox.message=`${this.rows[e].EmployeeName} `,this.$refs.confirmbox.confirm=!0,this.selected_index=e},wrapCsvValue(e,o){let l=void 0!==o?o(e):e;return l=void 0===l||null===l?"":String(l),l=l.split('"').join('""'),`"${l}"`},exportTable(){const e=[this.columns.map((e=>this.wrapCsvValue(e.label)))].concat(this.rows.map((e=>this.columns.map((o=>this.wrapCsvValue("function"===typeof o.field?o.field(e):e[void 0===o.field?o.name:o.field],o.format))).join(",")))).join("\r\n"),o=(0,h.Z)("table-export.csv",e,"text/csv");!0!==o&&(0,_.j)("Browser denied file download...")}},mounted(){this.fetch_rows(1)}};var U=l(3243),V=l(2025),W=l(3414),q=l(8886),x=l(8516),N=l(2165),D=l(8186),C=l(3884),P=l(1289),A=l(4842),I=l(9200),Z=l(9975),Q=l(8870),j=l(7518),T=l.n(j);k.render=f;const K=k;T()(k,"components",{QTable:U.Z,QSpace:V.Z,QItem:W.Z,QToggle:q.Z,QSelect:x.Z,QBtn:N.Z,QTr:D.Z,QTd:C.Z,QPopupEdit:P.Z,QInput:A.Z,QFab:I.Z,QFabAction:Z.Z,QTooltip:Q.Z});var R=l(2247);const z={name:"Employees",components:{EmployeeHeader:R.Z,EmployeesTable:K}};var $=l(4379);z.render=s;const O=z;T()(z,"components",{QPage:$.Z})}}]);