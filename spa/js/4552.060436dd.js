"use strict";(self["webpackChunkims"]=self["webpackChunkims"]||[]).push([[4552],{4552:(e,t,o)=>{o.r(t),o.d(t,{default:()=>V});var r=o(3673),a=o(2323);const s={class:"q-pa-lg justify-center"},n={class:"col"},l={class:"row q-gutter-md justify-center"},i={class:"row q-gutter-md justify-between"},c={class:"col-4"},p={class:"col-4 q-pt-xl"},d={style:{width:"500px"},class:"row q-gutter-sm"},u={class:"col"},h=(0,r._)("div",{class:"row justify-center"},[(0,r._)("h3",null,"Report")],-1),m={class:"col q-gutter-md"},R={class:"col-2 q-table__title"},w={class:"row q-gutter-md"},b={key:0},f={class:"text-h6"};function g(e,t,o,g,v,T){const y=(0,r.up)("q-date"),_=(0,r.up)("q-select"),k=(0,r.up)("q-btn"),E=(0,r.up)("q-space"),D=(0,r.up)("q-td"),C=(0,r.up)("q-tr"),B=(0,r.up)("q-table"),x=(0,r.up)("q-card-section"),P=(0,r.up)("q-card"),S=(0,r.up)("q-dialog"),I=(0,r.up)("q-page"),q=(0,r.Q2)("close-popup");return(0,r.wg)(),(0,r.j4)(I,{padding:""},{default:(0,r.w5)((()=>[(0,r._)("div",s,[(0,r._)("div",n,[(0,r._)("div",l,[(0,r._)("div",i,[(0,r._)("div",c,[(0,r.Wm)(y,{color:"orange",modelValue:v.dateRange,"onUpdate:modelValue":t[0]||(t[0]=e=>v.dateRange=e),range:""},null,8,["modelValue"])]),(0,r._)("div",p,[(0,r.Wm)(_,{color:"secondary",style:{"max-width":"300px"},modelValue:v.option,"onUpdate:modelValue":t[1]||(t[1]=e=>v.option=e),options:v.reportMethods,label:"Report Option",filled:"",rules:[T.myRule]},null,8,["modelValue","options","rules"]),(0,r._)("div",d,[(0,r.Wm)(k,{label:"Todays Report",onClick:t[2]||(t[2]=e=>T.todayReport()),color:"orange"}),(0,r.Wm)(k,{label:"Generate Range",onClick:t[3]||(t[3]=e=>T.onSubmit()),color:"orange"}),(0,r.Wm)(k,{label:"Reset",type:"reset",color:"negative",flat:"",class:"q-ml-sm"})])])])])]),(0,r._)("div",u,[h,(0,r._)("div",m,[(0,r._)("div",null,[(0,r.Wm)(B,{title:"Report",columns:v.columns,rows:T.transformer(v.rows),"row-key":"CustomerTable",color:"secondary",pagination:v.pagination,"hide-pagination":!0},{top:(0,r.w5)((e=>[(0,r._)("div",R,(0,a.zw)(v.title),1),(0,r.Wm)(E),(0,r._)("div",w,[(0,r.Wm)(k,{to:{name:"print",params:{user:T.printable_data}},color:"secondary",icon:"print",label:"Print"},null,8,["to"]),(0,r.Wm)(k,{color:"secondary","icon-right":"archive",label:"Export to csv","no-caps":"",onClick:T.exportTable},null,8,["onClick"]),(0,r.Wm)(k,{flat:"",round:"",dense:"",icon:e.inFullscreen?"fullscreen_exit":"fullscreen",onClick:e.toggleFullscreen,class:"q-ml-md"},null,8,["icon","onClick"])])])),body:(0,r.w5)((e=>[(0,r.Wm)(C,{props:e},{default:(0,r.w5)((()=>[(0,r.Wm)(D,{key:"Attribute",props:e},{default:(0,r.w5)((()=>[(0,r.Uk)((0,a.zw)(e.row.Attribute),1)])),_:2},1032,["props"]),(0,r.Wm)(D,{key:"Value",props:e},{default:(0,r.w5)((()=>[(0,r.Uk)((0,a.zw)(e.row.Value),1)])),_:2},1032,["props"]),(0,r.Wm)(D,{key:"More",props:e},{default:(0,r.w5)((()=>[v.IgnoredColumns.includes(e.row.Attribute)?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",b,[(0,r.Wm)(k,{color:"orange",icon:"read_more",onClick:t=>T.functionMapper(e.row.Attribute)},null,8,["onClick"])]))])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["columns","rows","pagination"])]),(0,r.Wm)(S,{modelValue:v.Rshow,"onUpdate:modelValue":t[4]||(t[4]=e=>v.Rshow=e)},{default:(0,r.w5)((()=>[(0,r.Wm)(P,{style:{"max-width":"100%"}},{default:(0,r.w5)((()=>[(0,r.Wm)(x,{class:"row items-center q-pb-none"},{default:(0,r.w5)((()=>[(0,r._)("div",f,(0,a.zw)(v.Rtitle),1),(0,r.Wm)(E),(0,r.wy)((0,r.Wm)(k,{icon:"close",color:"negative",flat:"",round:"",dense:""},null,512),[[q]])])),_:1}),(0,r.Wm)(B,{columns:v.Rcolumns,rows:v.Rrows,"row-key":"CustomerTable",color:"secondary"},null,8,["columns","rows"])])),_:1})])),_:1},8,["modelValue"])])])])])),_:1})}var v=o(6430),T=o(5616),y=o(2841),_=o(7428);const k={name:"ReportTable",components:{},data(){return{header_data:null,title:"Report",IgnoredColumns:["Total-Expence","NET-Profit"],Rshow:!1,Rtitle:"",Rrows:[],Rcolumns:[],dateRange:null,reportMethods:["FIFO","Average"],option:"FIFO",report:{},rows:{},pagination:{page:1,rowsPerPage:0},columns:[{name:"Attribute",label:"Attribute",field:"Attribute",align:"left",sortable:!0,required:!0},{name:"Value",label:"Value",field:"Value",align:"left",sortable:!0,required:!0},{name:"More",label:"Detail",field:"More",align:"right",required:!0}]}},computed:{toogle_columns(){return this.columns.filter((e=>!0!==e.required))},printable_data(){var e={title:"Report",table_tittle:"Report",header_data:this.header_data,columns:this.columns.filter((e=>!["More"].includes(e.name))),rows:this.transformer(this.rows)};return JSON.stringify(e)}},methods:{columnsAndRowGenerator(e,t){var o=[];e.forEach((e=>{o.push({name:e,label:e,field:e,align:"left",required:!0})}));var r=[];return t.forEach((t=>{var o={};for(let r in t)t.hasOwnProperty(r)&&e.includes(r)&&(o[r]=t[r]);r.push(o)})),{rows:r,cols:o}},functionMapper(e){switch(e){case"Total-Purchase":this.showPurchase();break;case"Total-Sales":this.showSales();break;case"Cost-Of-Sales":this.ItemReport();break;case"Gross-Profit":this.ItemReport();break;case"Rent-Expence":this.rentReport();break;case"Other-Expences":this.OEReport();break;case"Personal-Expences":this.PEReport();break;case"Bill-Expences":this.BillReport();break;case"Masatefiya-Expence":this.MasatefiyaReport();break;case"LoadingUnloading-Expence":this.LoadinReport();break;case"Sallary-Expence":this.SalaryReport();break;case"Transfer-Expence":this.TransferReport();break;case"Other-Incomes":this.IncomeReport();break;case"Bank-Deposit":this.BankTransactionReport();break;case"Bank-Withdrawal":this.BankTransactionReport();break;case"Purchases-CreditSettlement":this.PCSReport();break;case"Sales-CreditSettlement":this.SCSReport();break;default:}},showPurchase(){var e=this.columnsAndRowGenerator(["GRNNO","PurchsedDate","Total"],this.report.GRN);this.BindTable(e.cols,e.rows,"Purchases")},showSales(){var e=this.columnsAndRowGenerator(["REFNO","Date","Total"],this.report.Reference);this.BindTable(e.cols,e.rows,"Sales")},ItemReport(){var e=this.columnsAndRowGenerator(["ItemType","Begining-Inventory","Ending-Inventory","Total-Purchase","Revenue","COGS","Gross-Profit","Inventory-Turnover","GMROI","Sales-Through-Rate","DOI"],this.report.individual_report);this.BindTable(e.cols,e.rows,"Item Reports")},rentReport(){var e=this.columnsAndRowGenerator(["RentID","RentType","Date","Payment"],this.report.Rent);this.BindTable(e.cols,e.rows,"Rent Expences")},OEReport(){var e=this.columnsAndRowGenerator(["OEID","OEType","OEDescription","TotalCost"],this.report.Other_Expence);this.BindTable(e.cols,e.rows,"Other Expences")},PEReport(){var e=this.columnsAndRowGenerator(["PEID","PEType","PEDescription","TotalCost"],this.report.Personal_Expence);this.BindTable(e.cols,e.rows,"Personal Expences")},BillReport(){var e=this.columnsAndRowGenerator(["BID","BILLType","BillDescription","TotalCost"],this.report.Bills_Expence);this.BindTable(e.cols,e.rows,"Bill Expences")},MasatefiyaReport(){var e=this.columnsAndRowGenerator(["MID","REFNO","Date","Cost"],this.report.Masatefiya);this.BindTable(e.cols,e.rows,"Masatefiya Expences")},LoadinReport(){var e=this.columnsAndRowGenerator(["Date","Cost","GRNNO"],this.report.LoadingUnloading_Expence);this.BindTable(e.cols,e.rows,"Loading/Unloading Expences")},SalaryReport(){var e=this.columnsAndRowGenerator(["SalaryID","Date","Cost","EmployeeID"],this.report.Salary_Expence);this.BindTable(e.cols,e.rows,"Salary Expences")},TransferReport(){var e=this.columnsAndRowGenerator(["TEID","Date","Cost"],this.report.Transfer_Expence);this.BindTable(e.cols,e.rows,"Transfer Expences")},IncomeReport(){var e=this.columnsAndRowGenerator(["IncomeID","Description","Amount","Date"],this.report.Incomes);this.BindTable(e.cols,e.rows,"Incomes")},BankTransactionReport(){var e=this.columnsAndRowGenerator(["PBID","AccountNumber","BankName","TotalDeposit","TotalWithdrawal"],this.report.Bank_Transaction);this.BindTable(e.cols,e.rows,"Bank Transactions")},PCSReport(){var e=this.columnsAndRowGenerator(["GRNNO","PurchsedDate","SupplierName","DriverName","Remainder","Paid","Total"],this.report.GRN_CreditSettlement);this.BindTable(e.cols,e.rows,"Purchase Credit Settlement")},SCSReport(){var e=this.columnsAndRowGenerator(["REFNO","SalesDate","CustomerName","DriverName","Remainder","Paid","Total"],this.report.REF_CreditSettlement);this.BindTable(e.cols,e.rows,"Purchase Credit Settlement")},BindTable(e,t,o){this.Rcolumns=e,this.Rrows=t,this.Rtitle=o,this.Rshow=!0},transformer(e){return Object.keys(e).length>0?Object.keys(e).map((t=>({Attribute:t,Value:e[t]}))):[]},myRule(e){if(null===e)return"Empty Feild!!"},onReset(){this.dateRange=null,this.option=null},toogleRshow(e){this.Rshow=e},todayReport(){const e=Date.now(),t=T.ZP.formatDate(e,"YYYY/MM/DD");this.header_data={firstDate:t,lastDate:t};const o={date1:t,date2:t,option:this.option};(0,v.H)(o).then((e=>{this.report=e.data,this.rows=this.report.final_report})).catch((e=>{(0,_.j)(e.response.data.message,"negative","top")}))},onSubmit(){if(null==this.dateRange)(0,_.j)("Please select the Date first");else{this.header_data={firstDate:this.dateRange.from,lastDate:this.dateRange.to};const e={date1:this.dateRange.from,date2:this.dateRange.to,option:this.option};(0,v.H)(e).then((e=>{this.report=e.data,this.rows=this.report.final_report})).catch((e=>{(0,_.j)(e.response.data.message,"negative","top")}))}},wrapCsvValue(e,t){let o=void 0!==t?t(e):e;return o=void 0===o||null===o?"":String(o),o=o.split('"').join('""'),`"${o}"`},exportTable(){const e=[this.columns.map((e=>this.wrapCsvValue(e.label)))].concat(this.transformer(this.rows).map((e=>this.columns.map((t=>this.wrapCsvValue("function"===typeof t.field?t.field(e):e[void 0===t.field?t.name:t.field],t.format))).join(",")))).join("\r\n"),t=(0,y.Z)("table-export.csv",e,"text/csv");!0!==t&&(0,_.j)("Browser denied file download...")}}};var E=o(4379),D=o(2651),C=o(8516),B=o(2165),x=o(3243),P=o(2025),S=o(8186),I=o(3884),q=o(6778),A=o(151),G=o(5589),O=o(677),W=o(7518),N=o.n(W);k.render=g;const V=k;N()(k,"components",{QPage:E.Z,QDate:D.Z,QSelect:C.Z,QBtn:B.Z,QTable:x.Z,QSpace:P.Z,QTr:S.Z,QTd:I.Z,QDialog:q.Z,QCard:A.Z,QCardSection:G.Z}),N()(k,"directives",{ClosePopup:O.Z})}}]);