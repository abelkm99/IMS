"use strict";(self["webpackChunkims"]=self["webpackChunkims"]||[]).push([[2243],{2243:(e,s,t)=>{t.r(s),t.d(s,{default:()=>q});var o=t(3673),l=t(2323);const n={class:"q-pa-md"},a={class:"row q-gutter-md q-pa-md"},i={class:"q-pl-sm"},r={class:"col-2 q-table__title"},d={key:0,class:"col"},u={class:"row q-gutter-md"};function p(e,s,t,p,c,m){const h=(0,o.up)("DeleteDialogBox"),w=(0,o.up)("q-item"),f=(0,o.up)("q-space"),b=(0,o.up)("q-toggle"),g=(0,o.up)("q-select"),v=(0,o.up)("q-btn"),_=(0,o.up)("q-td"),C=(0,o.up)("q-tr"),y=(0,o.up)("q-table");return(0,o.wg)(),(0,o.iD)("div",n,[(0,o.Wm)(h,{onResponse:m.getResponse,ref:"confirmbox"},null,8,["onResponse"]),(0,o._)("div",a,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(c.TransferExpense,((e,s)=>((0,o.wg)(),(0,o.j4)(w,{key:s},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(s)+": ",1),(0,o._)("span",i,[(0,o._)("b",null,(0,l.zw)(e),1)])])),_:2},1024)))),128))]),(0,o.Wm)(y,{title:c.title,rows:c.rows,columns:c.columns,"row-key":"name","visible-columns":c.visibleColumns,loading:c.loading,color:"secondary","no-data-label":"There is No Transfer Under this GRN","rows-per-page-options":[]},{top:(0,o.w5)((t=>[(0,o._)("div",r,(0,l.zw)(c.title),1),(0,o.Wm)(f),e.$q.screen.gt.xs?((0,o.wg)(),(0,o.iD)("div",d,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(m.toogle_columns,(e=>((0,o.wg)(),(0,o.j4)(w,{style:{display:"inline"},key:e},{default:(0,o.w5)((()=>[(0,o.Wm)(b,{modelValue:c.visibleColumns,"onUpdate:modelValue":s[0]||(s[0]=e=>c.visibleColumns=e),val:e.name,label:e.label,color:"secondary"},null,8,["modelValue","val","label"])])),_:2},1024)))),128))])):((0,o.wg)(),(0,o.j4)(g,{key:1,color:"secondary",modelValue:c.visibleColumns,"onUpdate:modelValue":s[1]||(s[1]=e=>c.visibleColumns=e),multiple:"",borderless:"",dense:"","options-dense":"","display-value":e.$q.lang.table.columns,"emit-value":"","map-options":"",options:c.columns,"option-value":"name",style:{"min-width":"150px"}},null,8,["modelValue","display-value","options"])),(0,o.Wm)(v,{color:"secondary","icon-right":"archive",label:"Export to csv","no-caps":"",onClick:m.exportTable},null,8,["onClick"]),(0,o.Wm)(v,{flat:"",round:"",dense:"",icon:t.inFullscreen?"fullscreen_exit":"fullscreen",onClick:t.toggleFullscreen,class:"q-ml-md"},null,8,["icon","onClick"])])),body:(0,o.w5)((e=>[(0,o.Wm)(C,{props:e},{default:(0,o.w5)((()=>[(0,o.Wm)(_,{key:"ItemType",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.row.ItemType),1)])),_:2},1032,["props"]),(0,o.Wm)(_,{key:"ItemCode",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.row.ItemCode),1)])),_:2},1032,["props"]),(0,o.Wm)(_,{key:"INCount",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.row.INCount),1)])),_:2},1032,["props"])])),_:2},1032,["props"])])),bottom:(0,o.w5)((()=>[(0,o._)("div",u,[(0,o._)("div",null,[(0,o.Wm)(v,{to:{name:"print",params:{user:m.printable_data}},color:"secondary",icon:"print",label:"Print"},null,8,["to"])])])])),_:1},8,["title","rows","columns","visible-columns","loading"])])}var c=t(2841),m=t(6966),h=t(1121),w=t(7428);const f={name:"TransferList",components:{DeleteDialogBox:m.Z},data(){return{loading:!1,title:"Transferd Details",visibleColumns:["ItemType","ItemCode","INCount"],columns:[{name:"ItemType",label:"Item Type",field:"ItemType",align:"left",sortable:!0,required:!0},{name:"ItemCode",label:"Item Code",field:"ItemCode",align:"center",sortable:!0},{name:"INCount",label:"Total Transfered Count",field:"INCount",align:"center",sortable:!0}],rows:[],selected_index:null,TransferExpense:{}}},computed:{toogle_columns(){return this.columns.filter((e=>!0!==e.required))},printable_data(){var e={title:"Warehouse Store",table_tittle:"Transfered Items",header_data:this.TransferExpense,columns:this.columns.filter((e=>!["action"].includes(e.name))),rows:this.rows};return JSON.stringify(e)}},methods:{validate_GRN(){(0,h.CR)(this.$route.params.TEID).then((e=>{this.TransferExpense=e.data,this.fetchRows()})).catch((e=>{this.$router.push({name:"Etransfer-expenses"})}))},fetchRows(){(0,h.dp)(this.$route.params.TEID).then((e=>{this.rows=e.data,this.loading=!1})).catch((e=>{this.loading=!1}))},getResponse(e){if(e){const e={WSID:this.rows[this.selected_index].WSID};(0,h.XD)(e).then((e=>{(0,w.U)(e.data.message,"positive","top"),this.rows.splice(this.selected_index,1),this.selected_index=null,this.$refs.confirmbox.response=!1,this.validate_GRN()})).catch((e=>{(0,w.j)(e.response.data.message,"negative","top")}))}},update_transfered_count(e,s){var t=this.rows[s],o=e;t[o.key]=o.value;const l={newtransferdCount:t.INCount,WSID:t.WSID};l.newtransferdCount<1?((0,w.j)("Transfered Quantity cant be less than 1"),this.rows=[],this.fetchRows()):(0,h.LE)(l).then((e=>((0,w.U)(e.data.message,"positive","top"),!0))).catch((e=>((0,w.j)(e.response.data.message,"negative","top"),this.rows=[],this.fetchRows(),!1)))},show_dialog_box(e){this.$refs.confirmbox.message=`${this.rows[e].ItemType} `,this.$refs.confirmbox.confirm=!0,this.selected_index=e},wrapCsvValue(e,s){let t=void 0!==s?s(e):e;return t=void 0===t||null===t?"":String(t),t=t.split('"').join('""'),`"${t}"`},exportTable(){const e=[this.columns.map((e=>this.wrapCsvValue(e.label)))].concat(this.rows.map((e=>this.columns.map((s=>this.wrapCsvValue("function"===typeof s.field?s.field(e):e[void 0===s.field?s.name:s.field],s.format))).join(",")))).join("\r\n"),s=(0,c.Z)("table-export.csv",e,"text/csv");!0!==s&&(0,w.j)("Browser denied file download...")}},mounted(){this.validate_GRN()}};var b=t(3414),g=t(3243),v=t(2025),_=t(8886),C=t(8516),y=t(2165),I=t(8186),T=t(3884),x=t(7518),k=t.n(x);f.render=p;const q=f;k()(f,"components",{QItem:b.Z,QTable:g.Z,QSpace:v.Z,QToggle:_.Z,QSelect:C.Z,QBtn:y.Z,QTr:I.Z,QTd:T.Z})}}]);